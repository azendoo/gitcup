(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e){for(var n in e)r(e,n)&&(t[n]=e[n])};e.require=a,e.require.define=f,e.require.brunch=!0})(),!function(e,t){typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()}("chai",function(){function require(e){var t=require.resolve(e),n=require.modules[t];if(!n)throw new Error('failed to require "'+e+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,require.relative(t))),n.exports}return require.modules={},require.resolve=function(e){var t=e,n=e+".js",r=e+"/index.js";return require.modules[n]&&n||require.modules[r]&&r||t},require.register=function(e,t){require.modules[e]=t},require.relative=function(e){return function(t){if("."!=t[0])return require(t);var n=e.split("/"),r=t.split("/");n.pop();for(var i=0;i<r.length;i++){var s=r[i];".."==s?n.pop():"."!=s&&n.push(s)}return require(n.join("/"))}},require.register("assertion.js",function(e,t,n){function u(e,t,n){o(this,"ssfi",n||arguments.callee),o(this,"object",e),o(this,"message",t)}function a(e){var t=o(this,"object"),n=e.charAt(0).toUpperCase(),r=n+e.slice(1),s=~["A","E","I","O","U"].indexOf(n)?"an ":"a ";this.assert("[object "+r+"]"===i.call(t),"expected #{this} to be "+s+e,"expected #{this} not to be "+s+e,"[object "+r+"]",i.call(t))}function f(){o(this,"contains",!0)}function l(e){var t=o(this,"object");this.assert(~t.indexOf(e),"expected #{this} to include "+s.inspect(e),"expected #{this} to not include "+s.inspect(e))}function c(){var e=o(this,"object"),t=Object.prototype.toString.call(e);this.assert("[object Arguments]"===t,"expected #{this} to be arguments but got "+t,"expected #{this} to not be arguments")}var r=n("./browser/error"),i=Object.prototype.toString,s=n("./utils"),o=s.flag;e.exports=u,u.includeStack=!1,u.addProperty=function(e,t){s.addProperty(this.prototype,e,t)},u.addMethod=function(e,t){s.addMethod(this.prototype,e,t)},u.addChainableMethod=function(e,t,n){s.addChainableMethod(this.prototype,e,t,n)},u.overwriteProperty=function(e,t){s.overwriteProperty(this.prototype,e,t)},u.overwriteMethod=function(e,t){s.overwriteMethod(this.prototype,e,t)},u.prototype.assert=function(e,t,n,i,a){var t=s.getMessage(this,arguments),f=s.getActual(this,arguments),l=s.test(this,arguments);if(!l)throw new r({message:t,actual:f,expected:i,stackStartFunction:u.includeStack?this.assert:o(this,"ssfi")})},Object.defineProperty(u.prototype,"_obj",{get:function(){return o(this,"object")},set:function(e){o(this,"object",e)}}),["to","be","been","is","and","have","with"].forEach(function(e){Object.defineProperty(u.prototype,e,{get:function(){return this},configurable:!0})}),Object.defineProperty(u.prototype,"not",{get:function(){return o(this,"negate",!0),this},configurable:!0}),Object.defineProperty(u.prototype,"deep",{get:function(){return o(this,"deep",!0),this},configurable:!0}),u.addChainableMethod("an",a),u.addChainableMethod("a",a),u.addChainableMethod("include",l,f),u.addChainableMethod("contain",l,f),Object.defineProperty(u.prototype,"ok",{get:function(){return this.assert(o(this,"object"),"expected #{this} to be truthy","expected #{this} to be falsy"),this},configurable:!0}),Object.defineProperty(u.prototype,"true",{get:function(){return this.assert(!0===o(this,"object"),"expected #{this} to be true","expected #{this} to be false",this.negate?!1:!0),this},configurable:!0}),Object.defineProperty(u.prototype,"false",{get:function(){return this.assert(!1===o(this,"object"),"expected #{this} to be false","expected #{this} to be true",this.negate?!0:!1),this},configurable:!0}),Object.defineProperty(u.prototype,"null",{get:function(){return this.assert(null===o(this,"object"),"expected #{this} to be null","expected #{this} not to be null",this.negate?!1:!0),this},configurable:!0}),Object.defineProperty(u.prototype,"undefined",{get:function(){return this.assert(undefined===o(this,"object"),"expected #{this} to be undefined","expected #{this} not to be undefined",this.negate?!1:!0),this},configurable:!0}),Object.defineProperty(u.prototype,"exist",{get:function(){return this.assert(null!=o(this,"object"),"expected #{this} to exist","expected #{this} to not exist"),this},configurable:!0}),Object.defineProperty(u.prototype,"empty",{get:function(){var e=o(this,"object"),t=e;return Array.isArray(e)||"string"==typeof object?t=e.length:typeof e=="object"&&(t=Object.keys(e).length),this.assert(!t,"expected #{this} to be empty","expected #{this} not to be empty"),this},configurable:!0}),u.addProperty("arguments",c),u.addProperty("Arguments",c),u.prototype.equal=function(e){var t=o(this,"object");return o(this,"deep")?this.eql(e):(this.assert(e===t,"expected #{this} to equal #{exp}","expected #{this} to not equal #{exp}",e),this)},u.prototype.eql=function(e){return this.assert(s.eql(e,o(this,"object")),"expected #{this} to deeply equal #{exp}","expected #{this} to not deeply equal #{exp}",e),this},u.prototype.above=function(e){return this.assert(o(this,"object")>e,"expected #{this} to be above "+e,"expected #{this} to be below "+e),this},u.prototype.below=function(e){return this.assert(o(this,"object")<e,"expected #{this} to be below "+e,"expected #{this} to be above "+e),this},u.prototype.within=function(e,t){var n=o(this,"object"),r=e+".."+t;return this.assert(n>=e&&n<=t,"expected #{this} to be within "+r,"expected #{this} to not be within "+r),this},u.prototype.instanceOf=function(e){var t=s.getName(e);return this.assert(o(this,"object")instanceof e,"expected #{this} to be an instance of "+t,"expected #{this} to not be an instance of "+t),this},u.prototype.property=function(e,t){var n=o(this,"object"),r=o(this,"deep")?s.getPathValue(e,n):n[e],i=o(this,"deep")?"deep property ":"property ",u=o(this,"negate");if(u&&undefined!==t){if(undefined===r)throw new Error(s.inspect(n)+" has no "+i+s.inspect(e))}else this.assert(undefined!==r,"expected #{this} to have a "+i+s.inspect(e),"expected #{this} to not have "+i+s.inspect(e));return undefined!==t&&this.assert(t===r,"expected #{this} to have a "+i+s.inspect(e)+" of #{exp}, but got #{act}","expected #{this} to not have a "+i+s.inspect(e)+" of #{act}",t,r),o(this,"object",r),this},u.prototype.ownProperty=function(e){var t=o(this,"object");return this.assert(t.hasOwnProperty(e),"expected #{this} to have own property "+s.inspect(e),"expected #{this} to not have own property "+s.inspect(e)),this},u.prototype.length=function(e){var t=o(this,"object");(new u(t)).to.have.property("length");var n=t.length;return this.assert(n==e,"expected #{this} to have a length of #{exp} but got #{act}","expected #{this} to not have a length of #{act}",e,n),this},u.prototype.match=function(e){var t=o(this,"object");return this.assert(e.exec(t),"expected #{this} to match "+e,"expected #{this} not to match "+e),this},u.prototype.string=function(e){var t=o(this,"object");return(new u(t)).is.a("string"),this.assert(~t.indexOf(e),"expected #{this} to contain "+s.inspect(e),"expected #{this} to not contain "+s.inspect(e)),this},u.prototype.keys=function(e){var t=o(this,"object"),n,r=!0;e=e instanceof Array?e:Array.prototype.slice.call(arguments);if(!e.length)throw new Error("keys required");var i=Object.keys(t),u=e.length;r=e.every(function(e){return~i.indexOf(e)}),!o(this,"negate")&&!o(this,"contains")&&(r=r&&e.length==i.length);if(u>1){e=e.map(function(e){return s.inspect(e)});var a=e.pop();n=e.join(", ")+", and "+a}else n=s.inspect(e[0]);return n=(u>1?"keys ":"key ")+n,n=(o(this,"contains")?"contain ":"have ")+n,this.assert(r,"expected #{this} to "+n,"expected #{this} to not "+n,e,Object.keys(t)),this},u.prototype.Throw=function(e,t){var n=o(this,"object");(new u(n)).is.a("function");var r=!1,i=null,a=null;arguments.length===0?(t=null,e=null):e&&(e instanceof RegExp||"string"==typeof e)?(t=e,e=null):e&&e instanceof Error?(i=e,e=null,t=null):typeof e=="function"?a=(new e).name:e=null;try{n()}catch(f){if(i)return this.assert(f===i,"expected #{this} to throw "+s.inspect(i)+" but "+s.inspect(f)+" was thrown","expected #{this} to not throw "+s.inspect(i)),this;if(e){this.assert(f instanceof e,"expected #{this} to throw "+a+" but a "+f.name+" was thrown","expected #{this} to not throw "+a);if(!t)return this}if(f.message&&t&&t instanceof RegExp)return this.assert(t.exec(f.message),"expected #{this} to throw error matching "+t+" but got "+s.inspect(f.message),"expected #{this} to throw error not matching "+t),this;if(f.message&&t&&"string"==typeof t)return this.assert(~f.message.indexOf(t),"expected #{this} to throw error including #{exp} but got #{act}","expected #{this} to throw error not including #{act}",t,f.message),this;r=!0}var l=a?a:i?s.inspect(i):"an error";return this.assert(r===!0,"expected #{this} to throw "+l,"expected #{this} to not throw "+l),this},u.prototype.respondTo=function(e){var t=o(this,"object"),n=o(this,"itself"),r="function"==typeof t&&!n?t.prototype[e]:t[e];return this.assert("function"==typeof r,"expected #{this} to respond to "+s.inspect(e),"expected #{this} to not respond to "+s.inspect(e),"function",typeof r),this},Object.defineProperty(u.prototype,"itself",{get:function(){return o(this,"itself",!0),this},configurable:!0}),u.prototype.satisfy=function(e){var t=o(this,"object");return this.assert(e(t),"expected #{this} to satisfy "+s.inspect(e),"expected #{this} to not satisfy"+s.inspect(e),this.negate?!1:!0,e(t)),this},u.prototype.closeTo=function(e,t){var n=o(this,"object");return this.assert(n-t===e||n+t===e,"expected #{this} to be close to "+e+" +/- "+t,"expected #{this} not to be close to "+e+" +/- "+t),this},function h(e,t){return u.prototype[t]=u.prototype[e],h}("equal","eq")("above","gt")("below","lt")("length","lengthOf")("keys","key")("ownProperty","haveOwnProperty")("above","greaterThan")("below","lessThan")("Throw","throws")("Throw","throw")("instanceOf","instanceof")}),require.register("browser/error.js",function(e,t,n){function r(e){e=e||{},this.message=e.message,this.actual=e.actual,this.expected=e.expected,this.operator=e.operator;if(e.stackStartFunction&&Error.captureStackTrace){var t=e.stackStartFunction;Error.captureStackTrace(this,t)}}e.exports=r,r.prototype=Object.create(Error.prototype),r.prototype.name="AssertionError",r.prototype.constructor=r,r.prototype.toString=function(){return this.message}}),require.register("chai.js",function(e,t,n){var r=[],t=e.exports={};t.version="1.0.4",t.Assertion=n("./assertion"),t.AssertionError=n("./browser/error");var i=n("./utils");t.use=function(e){return~r.indexOf(e)||(e(this,i),r.push(e)),this};var s=n("./interface/expect");t.use(s);var o=n("./interface/should");t.use(o);var u=n("./interface/assert");t.use(u)}),require.register("interface/assert.js",function(module,exports,require){module.exports=function(chai,util){var Assertion=chai.Assertion,flag=util.flag,assert=chai.assert=function(e,t){var n=new Assertion(null);n.assert(e,t,"[ negation message unavailable ]")};assert.fail=function(e,t,n,r){throw new chai.AssertionError({actual:e,expected:t,message:n,operator:r,stackStartFunction:assert.fail})},assert.ok=function(e,t){(new Assertion(e,t)).is.ok},assert.equal=function(e,t,n){var r=new Assertion(e,n);r.assert(t==flag(r,"object"),"expected #{this} to equal #{exp}","expected #{this} to not equal #{act}",t,e)},assert.notEqual=function(e,t,n){var r=new Assertion(e,n);r.assert(t!=flag(r,"object"),"expected #{this} to not equal #{exp}","expected #{this} to equal #{act}",t,e)},assert.strictEqual=function(e,t,n){(new Assertion(e,n)).to.equal(t)},assert.notStrictEqual=function(e,t,n){(new Assertion(e,n)).to.not.equal(t)},assert.deepEqual=function(e,t,n){(new Assertion(e,n)).to.eql(t)},assert.notDeepEqual=function(e,t,n){(new Assertion(e,n)).to.not.eql(t)},assert.isTrue=function(e,t){(new Assertion(e,t)).is["true"]},assert.isFalse=function(e,t){(new Assertion(e,t)).is["false"]},assert.isNull=function(e,t){(new Assertion(e,t)).to.equal(null)},assert.isNotNull=function(e,t){(new Assertion(e,t)).to.not.equal(null)},assert.isUndefined=function(e,t){(new Assertion(e,t)).to.equal(undefined)},assert.isDefined=function(e,t){(new Assertion(e,t)).to.not.equal(undefined)},assert.isFunction=function(e,t){(new Assertion(e,t)).to.be.a("function")},assert.isNotFunction=function(e,t){(new Assertion(e,t)).to.not.be.a("function")},assert.isObject=function(e,t){(new Assertion(e,t)).to.be.a("object")},assert.isNotObject=function(e,t){(new Assertion(e,t)).to.not.be.a("object")},assert.isArray=function(e,t){(new Assertion(e,t)).to.be.an("array")},assert.isNotArray=function(e,t){(new Assertion(e,t)).to.not.be.an("array")},assert.isString=function(e,t){(new Assertion(e,t)).to.be.a("string")},assert.isNotString=function(e,t){(new Assertion(e,t)).to.not.be.a("string")},assert.isNumber=function(e,t){(new Assertion(e,t)).to.be.a("number")},assert.isNotNumber=function(e,t){(new Assertion(e,t)).to.not.be.a("number")},assert.isBoolean=function(e,t){(new Assertion(e,t)).to.be.a("boolean")},assert.isNotBoolean=function(e,t){(new Assertion(e,t)).to.not.be.a("boolean")},assert.typeOf=function(e,t,n){(new Assertion(e,n)).to.be.a(t)},assert.notTypeOf=function(e,t,n){(new Assertion(e,n)).to.not.be.a(t)},assert.instanceOf=function(e,t,n){(new Assertion(e,n)).to.be.instanceOf(t)},assert.notInstanceOf=function(e,t,n){(new Assertion(e,n)).to.not.be.instanceOf(t)},assert.include=function(e,t,n){var r=new Assertion(e,n);Array.isArray(e)?r.to.include(t):"string"==typeof e&&r.to.contain.string(t)},assert.match=function(e,t,n){(new Assertion(e,n)).to.match(t)},assert.notMatch=function(e,t,n){(new Assertion(e,n)).to.not.match(t)},assert.property=function(e,t,n){(new Assertion(e,n)).to.have.property(t)},assert.notProperty=function(e,t,n){(new Assertion(e,n)).to.not.have.property(t)},assert.deepProperty=function(e,t,n){(new Assertion(e,n)).to.have.deep.property(t)},assert.notDeepProperty=function(e,t,n){(new Assertion(e,n)).to.not.have.deep.property(t)},assert.propertyVal=function(e,t,n,r){(new Assertion(e,r)).to.have.property(t,n)},assert.propertyNotVal=function(e,t,n,r){(new Assertion(e,r)).to.not.have.property(t,n)},assert.deepPropertyVal=function(e,t,n,r){(new Assertion(e,r)).to.have.deep.property(t,n)},assert.deepPropertyNotVal=function(e,t,n,r){(new Assertion(e,r)).to.not.have.deep.property(t,n)},assert.lengthOf=function(e,t,n){(new Assertion(e,n)).to.have.length(t)},assert.Throw=function(e,t,n){"string"==typeof t&&(n=t,t=null),(new Assertion(e,n)).to.Throw(t)},assert.doesNotThrow=function(e,t,n){"string"==typeof t&&(n=t,t=null),(new Assertion(e,n)).to.not.Throw(t)},assert.operator=function(val,operator,val2,msg){if(!~["==","===",">",">=","<","<=","!=","!=="].indexOf(operator))throw new Error('Invalid operator "'+operator+'"');var test=new Assertion(eval(val+operator+val2),msg);test.assert(!0===flag(test,"object"),"expected "+util.inspect(val)+" to be "+operator+" "+util.inspect(val2),"expected "+util.inspect(val)+" to not be "+operator+" "+util.inspect(val2))},assert.ifError=function(e,t){(new Assertion(e,t)).to.not.be.ok},function alias(e,t){return assert[t]=assert[e],alias}("Throw","throw")("Throw","throws")}}),require.register("interface/expect.js",function(e,t,n){e.exports=function(e,t){e.expect=function(t,n){return new e.Assertion(t,n)}}}),require.register("interface/should.js",function(e,t,n){e.exports=function(e,t){function r(){Object.defineProperty(Object.prototype,"should",{set:function(){},get:function(){return this instanceof String||this instanceof Number?new n(this.constructor(this)):this instanceof Boolean?new n(this==1):new n(this)},configurable:!0});var e={};return e.equal=function(e,t){(new n(e)).to.equal(t)},e.Throw=function(e,t,r){(new n(e)).to.Throw(t,r)},e.exist=function(e){(new n(e)).to.exist},e.not={},e.not.equal=function(e,t){(new n(e)).to.not.equal(t)},e.not.Throw=function(e,t,r){(new n(e)).to.not.Throw(t,r)},e.not.exist=function(e){(new n(e)).to.not.exist},e["throw"]=e.Throw,e.not["throw"]=e.not.Throw,e}var n=e.Assertion;e.should=r,e.Should=r}}),require.register("utils/addChainableMethod.js",function(e,t,n){var r=n("./transferFlags");e.exports=function(e,t,n,i){typeof i!="function"&&(i=function(){}),Object.defineProperty(e,t,{get:function(){i.call(this);var t=function(){var e=n.apply(this,arguments);return e===undefined?this:e},s=Object.getOwnPropertyNames(e);return s.forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n),i=Object.getOwnPropertyDescriptor(Function.prototype,n);if(i&&!i.configurable)return;if(n==="arguments")return;Object.defineProperty(t,n,r)}),r(this,t),t},configurable:!0})}}),require.register("utils/addMethod.js",function(e,t,n){e.exports=function(e,t,n){e[t]=function(){var e=n.apply(this,arguments);return e===undefined?this:e}}}),require.register("utils/addProperty.js",function(e,t,n){e.exports=function(e,t,n){Object.defineProperty(e,t,{get:function(){var e=n.call(this);return e===undefined?this:e},configurable:!0})}}),require.register("utils/eql.js",function(e,t,n){function i(e,t){if(e===t)return!0;if(r.isBuffer(e)&&r.isBuffer(t)){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():typeof e!="object"&&typeof t!="object"?e===t:u(e,t)}function s(e){return e===null||e===undefined}function o(e){return Object.prototype.toString.call(e)=="[object Arguments]"}function u(e,t){if(s(e)||s(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return o(t)?(e=pSlice.call(e),t=pSlice.call(t),i(e,t)):!1;try{var n=Object.keys(e),r=Object.keys(t),u,a}catch(f){return!1}if(n.length!=r.length)return!1;n.sort(),r.sort();for(a=n.length-1;a>=0;a--)if(n[a]!=r[a])return!1;for(a=n.length-1;a>=0;a--){u=n[a];if(!i(e[u],t[u]))return!1}return!0}e.exports=i;if(!r)var r={isBuffer:function(){return!1}}}),require.register("utils/flag.js",function(e,t,n){e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));if(arguments.length!==3)return r[t];r[t]=n}}),require.register("utils/getActual.js",function(e,t,n){e.exports=function(e,t){var n=t[4];return"undefined"!==n?n:e.obj}}),require.register("utils/getMessage.js",function(e,t,n){var r=n("./flag"),i=n("./getActual"),s=n("./inspect");e.exports=function(e,t){var n=r(e,"negate"),o=r(e,"object"),u=t[3],a=i(e,t),f=n?t[2]:t[1],l=r(e,"message");return f=f||"",f=f.replace(/#{this}/g,s(o)).replace(/#{act}/g,s(a)).replace(/#{exp}/g,s(u)),l?l+": "+f:f}}),require.register("utils/getName.js",function(e,t,n){e.exports=function(e){if(e.name)return e.name;var t=/^\s?function ([^(]*)\(/.exec(e);return t&&t[1]?t[1]:""}}),require.register("utils/getPathValue.js",function(e,t,n){function i(e){var t=e.split(".").filter(Boolean);return t.map(function(e){var t=/([A-Za-z0-9]+)\[(\d+)\]$/,n=t.exec(e),r;return n&&(r={p:n[1],i:parseFloat(n[2])}),r||e})}function s(e,t){var n=t,r;for(var i=0,s=e.length;i<s;i++){var o=e[i];n?("object"==typeof o&&n[o.p]?n=n[o.p][o.i]:n=n[o],i==s-1&&(r=n)):r=undefined}return r}var r=e.exports=function(e,t){var n=i(e);return s(n,t)}}),require.register("utils/index.js",function(e,t,n){var t=e.exports={};t.test=n("./test"),t.getMessage=n("./getMessage"),t.getActual=n("./getActual"),t.inspect=n("./inspect"),t.flag=n("./flag"),t.transferFlags=n("./transferFlags"),t.eql=n("./eql"),t.getPathValue=n("./getPathValue"),t.getName=n("./getName"),t.addProperty=n("./addProperty"),t.addMethod=n("./addMethod"),t.overwriteProperty=n("./overwriteProperty"),t.overwriteMethod=n("./overwriteMethod"),t.addChainableMethod=n("./addChainableMethod")}),require.register("utils/inspect.js",function(e,t,n){function i(e,t,n,r){var i={showHidden:t,seen:[],stylize:function(e){return e}};return s(i,e,typeof n=="undefined"?2:n)}function s(e,n,i){if(n&&typeof n.inspect=="function"&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n))return n.inspect(i);var s=o(e,n);if(s)return s;var v=Object.keys(n),m=e.showHidden?Object.getOwnPropertyNames(n):v;if(m.length===0||d(n)&&(m.length===1&&m[0]==="stack"||m.length===2&&m[0]==="description"&&m[1]==="stack")){if(typeof n=="function"){var g=r(n),y=g?": "+g:"";return e.stylize("[Function"+y+"]","special")}if(h(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(p(n))return e.stylize(Date.prototype.toUTCString.call(n),"date");if(d(n))return u(n)}var b="",w=!1,E=["{","}"];c(n)&&(w=!0,E=["[","]"]);if(typeof n=="function"){var S=n.name?": "+n.name:"";b=" [Function"+S+"]"}h(n)&&(b=" "+RegExp.prototype.toString.call(n)),p(n)&&(b=" "+Date.prototype.toUTCString.call(n));if(d(n))return u(n);if(m.length!==0||!!w&&n.length!=0){if(i<0)return h(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special");e.seen.push(n);var x;return w?x=a(e,n,i,v,m):x=m.map(function(t){return f(e,n,i,v,t,w)}),e.seen.pop(),l(x,b,E)}return E[0]+b+E[1]}function o(e,t){switch(typeof t){case"undefined":return e.stylize("undefined","undefined");case"string":var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string");case"number":return e.stylize(""+t,"number");case"boolean":return e.stylize(""+t,"boolean")}if(t===null)return e.stylize("null","null")}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function a(e,t,n,r,i){var s=[];for(var o=0,u=t.length;o<u;++o)Object.prototype.hasOwnProperty.call(t,String(o))?s.push(f(e,t,n,r,String(o),!0)):s.push("");return i.forEach(function(i){i.match(/^\d+$/)||s.push(f(e,t,n,r,i,!0))}),s}function f(e,t,n,r,i,o){var u,a;t.__lookupGetter__&&(t.__lookupGetter__(i)?t.__lookupSetter__(i)?a=e.stylize("[Getter/Setter]","special"):a=e.stylize("[Getter]","special"):t.__lookupSetter__(i)&&(a=e.stylize("[Setter]","special"))),r.indexOf(i)<0&&(u="["+i+"]"),a||(e.seen.indexOf(t[i])<0?(n===null?a=s(e,t[i],null):a=s(e,t[i],n-1),a.indexOf("\n")>-1&&(o?a=a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):a="\n"+a.split("\n").map(function(e){return"   "+e}).join("\n"))):a=e.stylize("[Circular]","special"));if(typeof u=="undefined"){if(o&&i.match(/^\d+$/))return a;u=JSON.stringify(""+i),u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=e.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=e.stylize(u,"string"))}return u+": "+a}function l(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.length+1},0);return i>60?n[0]+(t===""?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function c(e){return Array.isArray(e)||typeof e=="object"&&v(e)==="[object Array]"}function h(e){return typeof e=="object"&&v(e)==="[object RegExp]"}function p(e){return typeof e=="object"&&v(e)==="[object Date]"}function d(e){return typeof e=="object"&&v(e)==="[object Error]"}function v(e){return Object.prototype.toString.call(e)}var r=n("./getName");e.exports=i}),require.register("utils/overwriteMethod.js",function(e,t,n){e.exports=function(e,t,n){var r=e[t],i=function(){return this};r&&"function"==typeof r&&(i=r),e[t]=function(){var e=n(i).apply(this,arguments);return e===undefined?this:e}}}),require.register("utils/overwriteProperty.js",function(e,t,n){e.exports=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e,t),i=function(){};r&&"function"==typeof r.get&&(i=r.get),Object.defineProperty(e,t,{get:function(){var e=n(i).call(this);return e===undefined?this:e},configurable:!0})}}),require.register("utils/test.js",function(e,t,n){var r=n("./flag");e.exports=function(e,t){var n=r(e,"negate"),i=t[0];return n?!i:i}}),require.register("utils/transferFlags.js",function(e,t,n){e.exports=function(e,t,n){var r=e.__flags||(e.__flags=Object.create(null));t.__flags||(t.__flags=Object.create(null)),n=arguments.length===3?n:!0;for(var i in r)if(n||i!=="object"&&i!=="ssfi"&&i!="message")t.__flags[i]=r[i]}}),require("chai")}),function(){function e(t){var n=e.resolve(t),r=e.modules[n];if(!r)throw new Error('failed to require "'+t+'"');return r.exports||(r.exports={},r.call(r.exports,r,r.exports,e.relative(n))),r.exports}e.modules={},e.resolve=function(t){var n=t,r=t+".js",i=t+"/index.js";return e.modules[r]&&r||e.modules[i]&&i||n},e.register=function(t,n){e.modules[t]=n},e.relative=function(t){return function(n){if("."!=n.charAt(0))return e(n);var r=t.split("/"),i=n.split("/");r.pop();for(var s=0;s<i.length;s++){var o=i[s];".."==o?r.pop():"."!=o&&r.push(o)}return e(r.join("/"))}},e.register("browser/debug.js",function(e,t,n){e.exports=function(e){return function(){}}}),e.register("browser/diff.js",function(e,t,n){}),e.register("browser/events.js",function(e,t,n){function r(e){return"[object Array]"=={}.toString.call(e)}function i(){}t.EventEmitter=i,i.prototype.on=function(e,t){return this.$events||(this.$events={}),this.$events[e]?r(this.$events[e])?this.$events[e].push(t):this.$events[e]=[this.$events[e],t]:this.$events[e]=t,this},i.prototype.addListener=i.prototype.on,i.prototype.once=function(e,t){function r(){n.removeListener(e,r),t.apply(this,arguments)}var n=this;return r.listener=t,this.on(e,r),this},i.prototype.removeListener=function(e,t){if(this.$events&&this.$events[e]){var n=this.$events[e];if(r(n)){var i=-1;for(var s=0,o=n.length;s<o;s++)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;n.splice(i,1),n.length||delete this.$events[e]}else(n===t||n.listener&&n.listener===t)&&delete this.$events[e]}return this},i.prototype.removeAllListeners=function(e){return e===undefined?(this.$events={},this):(this.$events&&this.$events[e]&&(this.$events[e]=null),this)},i.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),r(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},i.prototype.emit=function(e){if(!this.$events)return!1;var t=this.$events[e];if(!t)return!1;var n=[].slice.call(arguments,1);if("function"==typeof t)t.apply(this,n);else{if(!r(t))return!1;var i=t.slice();for(var s=0,o=i.length;s<o;s++)i[s].apply(this,n)}return!0}}),e.register("browser/fs.js",function(e,t,n){}),e.register("browser/path.js",function(e,t,n){}),e.register("browser/progress.js",function(e,t,n){function r(){this.percent=0,this.size(0),this.fontSize(11),this.font("helvetica, arial, sans-serif")}e.exports=r,r.prototype.size=function(e){return this._size=e,this},r.prototype.text=function(e){return this._text=e,this},r.prototype.fontSize=function(e){return this._fontSize=e,this},r.prototype.font=function(e){return this._font=e,this},r.prototype.update=function(e){return this.percent=e,this},r.prototype.draw=function(e){var t=Math.min(this.percent,100),n=this._size,r=n/2,i=r,s=r,o=r-1,u=this._fontSize;e.font=u+"px "+this._font;var a=Math.PI*2*(t/100);e.clearRect(0,0,n,n),e.strokeStyle="#9f9f9f",e.beginPath(),e.arc(i,s,o,0,a,!1),e.stroke(),e.strokeStyle="#eee",e.beginPath(),e.arc(i,s,o-1,0,a,!0),e.stroke();var f=this._text||(t|0)+"%",l=e.measureText(f).width;return e.fillText(f,i-l/2+1,s+u/2-1),this}}),e.register("browser/tty.js",function(e,t,n){t.isatty=function(){return!0},t.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}}),e.register("context.js",function(e,t,n){function r(){}e.exports=r,r.prototype.runnable=function(e){return this._runnable=e,this},r.prototype.timeout=function(e){return this._runnable.timeout(e),this},r.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_runnable"==e?undefined:t},2)}}),e.register("hook.js",function(e,t,n){function i(e,t){r.call(this,e,t),this.type="hook"}var r=n("./runnable");e.exports=i,i.prototype=new r,i.prototype.constructor=i}),e.register("interfaces/bdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.xdescribe=function(){},e.xit=function(){},e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.describe=e.context=function(e,n){var i=r.create(t[0],e);t.unshift(i),n(),t.shift()},e.it=e.specify=function(e,n){t[0].addTest(new i(e,n))}})}}),e.register("interfaces/exports.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){function n(e){var s;for(var o in e)if("function"==typeof e[o]){var u=e[o];switch(o){case"before":t[0].beforeAll(u);break;case"after":t[0].afterAll(u);break;case"beforeEach":t[0].beforeEach(u);break;case"afterEach":t[0].afterEach(u);break;default:t[0].addTest(new i(o,u))}}else{var s=r.create(t[0],o);t.unshift(s),n(e[o]),t.shift()}}var t=[e];e.on("require",n)}}),e.register("interfaces/index.js",function(e,t,n){t.bdd=n("./bdd"),t.tdd=n("./tdd"),t.qunit=n("./qunit"),t.exports=n("./exports")}),e.register("interfaces/qunit.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.before=function(e){t[0].beforeAll(e)},e.after=function(e){t[0].afterAll(e)},e.beforeEach=function(e){t[0].beforeEach(e)},e.afterEach=function(e){t[0].afterEach(e)},e.suite=function(e){t.length>1&&t.shift();var n=r.create(t[0],e);t.unshift(n)},e.test=function(e,n){t[0].addTest(new i(e,n))}})}}),e.register("interfaces/tdd.js",function(e,t,n){var r=n("../suite"),i=n("../test");e.exports=function(e){var t=[e];e.on("pre-require",function(e){e.setup=function(e){t[0].beforeEach(e)},e.teardown=function(e){t[0].afterEach(e)},e.suiteSetup=function(e){t[0].beforeAll(e)},e.suiteTeardown=function(e){t[0].afterAll(e)},e.suite=function(e,n){var i=r.create(t[0],e);t.unshift(i),n(),t.shift()},e.test=function(e,n){t[0].addTest(new i(e,n))}})}}),e.register("mocha.js",function(e,t,n){function i(e){return __dirname+"/../images/"+e+".png"}function s(e){e=e||{},this.files=[],this.options=e,this.grep(e.grep),this.suite=new t.Suite("",new t.Context),this.ui(e.ui),this.reporter(e.reporter),e.timeout&&this.suite.timeout(e.timeout)}var r=n("browser/path");t=e.exports=s,t.version="1.2.0",t.utils=n("./utils"),t.interfaces=n("./interfaces"),t.reporters=n("./reporters"),t.Runnable=n("./runnable"),t.Context=n("./context"),t.Runner=n("./runner"),t.Suite=n("./suite"),t.Hook=n("./hook"),t.Test=n("./test"),s.prototype.addFile=function(e){return this.files.push(e),this},s.prototype.reporter=function(e){e=e||"dot",this._reporter=n("./reporters/"+e);if(!this._reporter)throw new Error('invalid reporter "'+e+'"');return this},s.prototype.ui=function(e){e=e||"bdd",this._ui=t.interfaces[e];if(!this._ui)throw new Error('invalid interface "'+e+'"');return this._ui=this._ui(this.suite),this},s.prototype.loadFiles=function(){var e=this.suite;this.files.forEach(function(t){t=r.resolve(t),e.emit("pre-require",global,t),e.emit("require",n(t),t),e.emit("post-require",global,t)})},s.prototype.growl=function(e,t){var r=n("growl");e.on("end",function(){var n=t.stats;if(n.failures){var s=n.failures+" of "+e.total+" tests failed";r(s,{name:"mocha",title:"Failed",image:i("error")})}else r(n.passes+" tests passed in "+n.duration+"ms",{name:"mocha",title:"Passed",image:i("ok")})})},s.prototype.grep=function(e){return this.options.grep="string"==typeof e?new RegExp(e):e,this},s.prototype.run=function(e){this.loadFiles();var n=this.suite,r=this.options,i=new t.Runner(n),s=new this._reporter(i);return i.ignoreLeaks=r.ignoreLeaks,r.grep&&i.grep(r.grep),r.globals&&i.globals(r.globals),r.growl&&this.growl(i,s),i.run(e)}}),e.register("reporters/base.js",function(e,t,n){function h(e){var n=this,r=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},i=this.failures=[];if(!e)return;this.runner=e,e.on("start",function(){r.start=new s}),e.on("suite",function(e){r.suites=r.suites||0,e.root||r.suites++}),e.on("test end",function(e){r.tests=r.tests||0,r.tests++}),e.on("pass",function(e){r.passes=r.passes||0;var n=t.slow/2;e.speed=e.duration>t.slow?"slow":e.duration>n?"medium":"fast",r.passes++}),e.on("fail",function(e,t){r.failures=r.failures||0,r.failures++,e.err=t,i.push(e)}),e.on("end",function(){r.end=new s,r.duration=new s-r.start}),e.on("pending",function(){r.pending++})}function p(e,t){return e=String(e),Array(t-e.length+1).join(" ")+e}function d(e,t){return i["diff"+t](e.actual,e.expected).map(function(e){return/^(\n+)$/.test(e.value)&&(e.value=Array(++RegExp.$1.length).join("<newline>")),e.added?v("diff added",e.value):e.removed?v("diff removed",e.value):e.value}).join("")}function v(e,t){return t.split("\n").map(function(t){return c(e,t)}).join("\n")}var r=n("browser/tty"),i=n("browser/diff"),s=global.Date,o=global.setTimeout,u=global.setInterval,a=global.clearTimeout,f=global.clearInterval,l=r.isatty(1)&&r.isatty(2);t=e.exports=h,t.useColors=l,t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};var c=t.color=function(e,n){return t.useColors?"["+t.colors[e]+"m"+n+"[0m":n};t.window={width:l?process.stdout.getWindowSize?process.stdout.getWindowSize(1)[0]:r.getWindowSize()[1]:75},t.cursor={hide:function(){process.stdout.write("[?25l")},show:function(){process.stdout.write("[?25h")},deleteLine:function(){process.stdout.write("[2K")},beginningOfLine:function(){process.stdout.write("[0G")},CR:function(){t.cursor.deleteLine(),t.cursor.beginningOfLine()}},t.slow=75,t.list=function(e){console.error(),e.forEach(function(e,t){var n=c("error title","  %s) %s:\n")+c("error message","     %s")+c("error stack","\n%s\n"),r=e.err,i=r.message||"",s=r.stack||i,o=s.indexOf(i)+i.length,u=s.slice(0,o),a=r.actual,f=r.expected;if("string"==typeof a&&"string"==typeof f){var l=Math.max(a.length,f.length);l<20?u=d(r,"Chars"):u=d(r,"Words");var h=u.split("\n");if(h.length>4){var v=String(h.length).length;u=h.map(function(e,t){return p(++t,v)+" |"+" "+e}).join("\n")}u="\n"+c("diff removed","actual")+" "+c("diff added","expected")+"\n\n"+u+"\n",u=u.replace(/^/gm,"      "),n=c("error title","  %s) %s:\n%s")+c("error stack","\n%s\n")}s=s.slice(o?o+1:o).replace(/^/gm,"  "),console.error(n,t+1,e.fullTitle(),u,s)})},h.prototype.epilogue=function(){function r(e){return 1==e?"test":"tests"}var e=this.stats,t,n;console.log();if(e.failures){t=c("bright fail","  ✖")+c("fail"," %d of %d %s failed")+c("light",":"),console.error(t,e.failures,this.runner.total,r(this.runner.total)),h.list(this.failures),console.error();return}t=c("bright pass","  ✔")+c("green"," %d %s complete")+c("light"," (%dms)"),console.log(t,e.tests||0,r(e.tests),e.duration),e.pending&&(t=c("pending","  •")+c("pending"," %d %s pending"),console.log(t,e.pending,r(e.pending))),console.log()}}),e.register("reporters/doc.js",function(e,t,n){function s(e){function u(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,s=e.total,o=2;e.on("suite",function(e){if(e.root)return;++o,console.log('%s<section class="suite">',u()),++o,console.log("%s<h1>%s</h1>",u(),e.title),console.log("%s<dl>",u())}),e.on("suite end",function(e){if(e.root)return;console.log("%s</dl>",u()),--o,console.log("%s</section>",u()),--o}),e.on("pass",function(e){console.log("%s  <dt>%s</dt>",u(),e.title);var t=i.escape(i.clean(e.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",u(),t)})}var r=n("./base"),i=n("../utils");t=e.exports=s}),e.register("reporters/dot.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,s=r.window.width*.75|0,o=0;e.on("start",function(){process.stdout.write("\n  ")}),e.on("pending",function(e){process.stdout.write(i("pending","."))}),e.on("pass",function(e){++o%s==0&&process.stdout.write("\n  "),"slow"==e.speed?process.stdout.write(i("bright yellow",".")):process.stdout.write(i(e.speed,"."))}),e.on("fail",function(e,t){++o%s==0&&process.stdout.write("\n  "),process.stdout.write(i("fail","."))}),e.on("end",function(){console.log(),t.epilogue()})}var r=n("./base"),i=r.color;t=e.exports=s,s.prototype=new r,s.prototype.constructor=s}),e.register("reporters/html-cov.js",function(e,t,n){function s(e){var t=n("jade"),s=__dirname+"/templates/coverage.jade",u=i.readFileSync(s,"utf8"),a=t.compile(u,{filename:s}),f=this;r.call(this,e,!1),e.on("end",function(){process.stdout.write(a({cov:f.cov,coverageClass:o}))})}function o(e){return e>=75?"high":e>=50?"medium":e>=25?"low":"terrible"}var r=n("./json-cov"),i=n("browser/fs");t=e.exports=s}),e.register("reporters/html.js",function(e,t,n){function p(e){r.call(this,e);var t=this,n=this.stats,o=e.total,a=document.getElementById("mocha"),f=v(h),l=f.getElementsByTagName("li"),c=l[1].getElementsByTagName("em")[0],p=l[2].getElementsByTagName("em")[0],y=l[3].getElementsByTagName("em")[0],b=f.getElementsByTagName("canvas")[0],w=v('<ul id="report"></ul>'),E=[w],S,x;b.getContext&&(x=b.getContext("2d"),S=new s);if(!a)return d("#mocha div missing, add it to your document");a.appendChild(f),a.appendChild(w),S&&S.size(40),e.on("suite",function(e){if(e.root)return;var t=location.protocol+"//"+location.host+location.pathname+"?grep=^"+i.escapeRegexp(e.fullTitle()),n=v('<li class="suite"><h1><a href="%s">%s</a></h1></li>',t,e.title);E[0].appendChild(n),E.unshift(document.createElement("ul")),n.appendChild(E[0])}),e.on("suite end",function(e){if(e.root)return;E.shift()}),e.on("fail",function(t,n){("hook"==t.type||n.uncaught)&&e.emit("test end",t)}),e.on("test end",function(e){var t=n.tests/o*100|0;S&&S.update(t).draw(x);var r=new u-n.start;m(c,n.passes),m(p,n.failures),m(y,(r/1e3).toFixed(2));if("passed"==e.state)var s=v('<li class="test pass %e"><h2>%e<span class="duration">%ems</span></h2></li>',e.speed,e.title,e.duration);else if(e.pending)var s=v('<li class="test pass pending"><h2>%e</h2></li>',e.title);else{var s=v('<li class="test fail"><h2>%e</h2></li>',e.title),a=e.err.stack||e.err.toString();~a.indexOf(e.err.message)||(a=e.err.message+"\n"+a),"[object Error]"==a&&(a=e.err.message),!e.err.stack&&e.err.sourceURL&&e.err.line!==undefined&&(a+="\n("+e.err.sourceURL+":"+e.err.line+")"),s.appendChild(v('<pre class="error">%e</pre>',a))}var f=s.getElementsByTagName("h2")[0];g(f,"click",function(){l.style.display="none"==l.style.display?"block":"none"});if(!e.pending){var l=v("<pre><code>%e</code></pre>",i.clean(e.fn.toString()));s.appendChild(l),l.style.display="none"}E[0].appendChild(s)})}function d(e){document.body.appendChild(v('<div id="error">%s</div>',e))}function v(e){var t=arguments,n=document.createElement("div"),r=1;return n.innerHTML=e.replace(/%([se])/g,function(e,n){switch(n){case"s":return String(t[r++]);case"e":return o(t[r++])}}),n.firstChild}function m(e,t){e.textContent?e.textContent=t:e.innerText=t}function g(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}var r=n("./base"),i=n("../utils"),s=n("../browser/progress"),o=i.escape,u=global.Date,a=global.setTimeout,f=global.setInterval,l=global.clearTimeout,c=global.clearInterval;t=e.exports=p;var h='<ul id="stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes">passes: <em>0</em></li><li class="failures">failures: <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>'}),e.register("reporters/index.js",function(e,t,n){t.Base=n("./base"),t.Dot=n("./dot"),t.Doc=n("./doc"),t.TAP=n("./tap"),t.JSON=n("./json"),t.HTML=n("./html"),t.List=n("./list"),t.Min=n("./min"),t.Spec=n("./spec"),t.Progress=n("./progress"),t.Landing=n("./landing"),t.JSONCov=n("./json-cov"),t.HTMLCov=n("./html-cov"),t.JSONStream=n("./json-stream"),t.XUnit=n("./xunit"),t.Teamcity=n("./teamcity")}),e.register("reporters/json-cov.js",function(e,t,n){function i(e,t){var n=this,t=1==arguments.length?!0:t;r.call(this,e);var i=[],o=[],a=[];e.on("test end",function(e){i.push(e)}),e.on("pass",function(e){a.push(e)}),e.on("fail",function(e){o.push(e)}),e.on("end",function(){var e=global._$jscoverage||{},r=n.cov=s(e);r.stats=n.stats,r.tests=i.map(u),r.failures=o.map(u),r.passes=a.map(u);if(!t)return;process.stdout.write(JSON.stringify(r,null,2))})}function s(e){var t={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var n in e){var r=o(n,e[n]);t.files.push(r),t.hits+=r.hits,t.misses+=r.misses,t.sloc+=r.sloc}return t.sloc>0&&(t.coverage=t.hits/t.sloc*100),t}function o(e,t){var n={filename:e,coverage:0,hits:0,misses:0,sloc:0,source:{}};return t.source.forEach(function(e,r){r++,t[r]===0?(n.misses++,n.sloc++):t[r]!==undefined&&(n.hits++,n.sloc++),n.source[r]={source:e,coverage:t[r]===undefined?"":t[r]}}),n.coverage=n.hits/n.sloc*100,n}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base");t=e.exports=i}),e.register("reporters/json-stream.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=e.total;e.on("start",function(){console.log(JSON.stringify(["start",{total:i}]))}),e.on("pass",function(e){console.log(JSON.stringify(["pass",o(e)]))}),e.on("fail",function(e,t){console.log(JSON.stringify(["fail",o(e)]))}),e.on("end",function(){process.stdout.write(JSON.stringify(["end",t.stats]))})}function o(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.color;t=e.exports=s}),e.register("reporters/json.js",function(e,t,n){function o(e){var t=this;r.call(this,e);var n=[],i=[],s=[];e.on("test end",function(e){n.push(e)}),e.on("pass",function(e){s.push(e)}),e.on("fail",function(e){i.push(e)}),e.on("end",function(){var e={stats:t.stats,tests:n.map(u),failures:i.map(u),passes:s.map(u)};process.stdout.write(JSON.stringify(e,null,2))})}function u(e){return{title:e.title,fullTitle:e.fullTitle(),duration:e.duration}}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o}),e.register("reporters/landing.js",function(e,t,n){function o(e){function h(){var e=Array(o).join("-");return"  "+s("runway",e)}r.call(this,e);var t=this,n=this.stats,o=r.window.width*.75|0,u=e.total,a=process.stdout,f=s("plane","✈"),l=-1,c=0;e.on("start",function(){a.write("\n  "),i.hide()}),e.on("test end",function(e){var t=-1==l?o*++c/u|0:l;"failed"==e.state&&(f=s("plane crash","✈"),l=t),a.write("[4F\n\n"),a.write(h()),a.write("\n  "),a.write(s("runway",Array(t).join("⋅"))),a.write(f),a.write(s("runway",Array(o-t).join("⋅")+"\n")),a.write(h()),a.write("[0m")}),e.on("end",function(){i.show(),console.log(),t.epilogue()})}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o,r.colors.plane=0,r.colors["plane crash"]=31,r.colors.runway=90,o.prototype=new r,o.prototype.constructor=o}),e.register("reporters/list.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,o=0;e.on("start",function(){console.log()}),e.on("test",function(e){process.stdout.write(s("pass","    "+e.fullTitle()+": "))}),e.on("pending",function(e){var t=s("checkmark","  -")+s("pending"," %s");console.log(t,e.fullTitle())}),e.on("pass",function(e){var t=s("checkmark","  ✓")+s("pass"," %s: ")+s(e.speed,"%dms");i.CR(),console.log(t,e.fullTitle(),e.duration)}),e.on("fail",function(e,t){i.CR(),console.log(s("fail","  %d) %s"),++o,e.fullTitle())}),e.on("end",t.epilogue.bind(t))}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o,o.prototype=new r,o.prototype.constructor=o}),e.register("reporters/markdown.js",function(e,t,n){function s(e){function a(e){return Array(o).join("#")+" "+e}function f(){return Array(o).join("  ")}function l(e,t){var n=t;return t=t[e.title]=t[e.title]||{suite:e},e.suites.forEach(function(e){l(e,t)}),n}function c(e,t){++t;var n="",r;for(var s in e){if("suite"==s)continue;s&&(r=" - ["+s+"](#"+i.slug(e[s].suite.fullTitle())+")\n"),s&&(n+=Array(t).join("  ")+r),n+=c(e[s],t)}return--t,n}function h(e){var t=l(e,{});return c(t,0)}r.call(this,e);var t=this,n=this.stats,s=e.total,o=0,u="";h(e.suite),e.on("suite",function(e){++o;var t=i.slug(e.fullTitle());u+='<a name="'+t+'" />'+"\n",u+=a(e.title)+"\n"}),e.on("suite end",function(e){--o}),e.on("pass",function(e){var t=i.clean(e.fn.toString());u+=e.title+".\n",u+="\n```js",u+=t+"\n",u+="```\n\n"}),e.on("end",function(){process.stdout.write("# TOC\n"),process.stdout.write(h(e.suite)),process.stdout.write(u)})}var r=n("./base"),i=n("../utils");t=e.exports=s}),e.register("reporters/min.js",function(e,t,n){function i(e){r.call(this,e),e.on("start",function(){process.stdout.write("[2J"),process.stdout.write("[1;3H")}),e.on("end",this.epilogue.bind(this))}var r=n("./base");t=e.exports=i,i.prototype=new r,i.prototype.constructor=i}),e.register("reporters/nyan.js",function(e,t,n){function s(e){r.call(this,e);var t=this,n=this.stats,i=r.window.width*.75|0,s=this.rainbowColors=t.generateColors(),u=this.colorIndex=0,a=this.numberOfLines=4,f=this.trajectories=[[],[],[],[]],l=this.nyanCatWidth=11,c=this.trajectoryWidthMax=i-l,h=this.scoreboardWidth=5,p=this.tick=0,d=0;e.on("start",function(){r.cursor.hide(),t.draw("start")}),e.on("pending",function(e){t.draw("pending")}),e.on("pass",function(e){t.draw("pass")}),e.on("fail",function(e,n){t.draw("fail")}),e.on("end",function(){r.cursor.show();for(var e=0;e<t.numberOfLines;e++)o("\n");t.epilogue()})}function o(e){process.stdout.write(e)}var r=n("./base"),i=r.color;t=e.exports=s,s.prototype.draw=function(e){this.appendRainbow(),this.drawScoreboard(),this.drawRainbow(),this.drawNyanCat(e),this.tick=!this.tick},s.prototype.drawScoreboard=function(){function n(e,t){o(" "),o("["+e+"m"+t+"[0m"),o("\n")}var e=this.stats,t=r.colors;n(t.green,e.passes),n(t.fail,e.failures),n(t.pending,e.pending),o("\n"),this.cursorUp(this.numberOfLines)},s.prototype.appendRainbow=function(){var e=this.tick?"_":"-",t=this.rainbowify(e);for(var n=0;n<this.numberOfLines;n++){var r=this.trajectories[n];r.length>=this.trajectoryWidthMax&&r.shift(),r.push(t)}},s.prototype.drawRainbow=function(){var e=this;this.trajectories.forEach(function(t,n){o("["+e.scoreboardWidth+"C"),o(t.join("")),o("\n")}),this.cursorUp(this.numberOfLines)},s.prototype.drawNyanCat=function(e){var t=this,n=this.scoreboardWidth+this.trajectories[0].length;[0,1,2,3].forEach(function(r){o("["+n+"C");switch(r){case 0:o("_,------,"),o("\n");break;case 1:var i=t.tick?"  ":"   ";o("_|"+i+"/\\_/\\"),o("\n");break;case 2:var i=t.tick?"_":"__",s=t.tick?"~":"^",u;switch(e){case"pass":u="( ^ .^)";break;case"fail":u="( o .o)";break;default:u="( - .-)"}o(s+"|"+i+u),o("\n");break;case 3:var i=t.tick?" ":"  ";o(i+'""  ""'),o("\n")}}),this.cursorUp(this.numberOfLines)},s.prototype.cursorUp=function(e){o("["+e+"A")},s.prototype.cursorDown=function(e){o("["+e+"B")},s.prototype.generateColors=function(){var e=[];for(var t=0;t<42;t++){var n=Math.floor(Math.PI/3),r=t*(1/6),i=Math.floor(3*Math.sin(r)+3),s=Math.floor(3*Math.sin(r+2*n)+3),o=Math.floor(3*Math.sin(r+4*n)+3);e.push(36*i+6*s+o+16)}return e},s.prototype.rainbowify=function(e){var t=this.rainbowColors[this.colorIndex%this.rainbowColors.length];return this.colorIndex+=1,"[38;5;"+t+"m"+e+"[0m"},s.prototype=new r,s.prototype.constructor=s}),e.register("reporters/progress.js",function(e,t,n){function o(e,t){r.call(this,e);var n=this,t=t||{},o=this.stats,u=r.window.width*.5|0,a=e.total,f=0,l=Math.max;t.open=t.open||"[",t.complete=t.complete||"▬",t.incomplete=t.incomplete||"⋅",t.close=t.close||"]",t.verbose=!1,e.on("start",function(){console.log(),i.hide()}),e.on("test end",function(){f++;var e=a-f,n=f/a,r=u*n|0,o=u-r;i.CR(),process.stdout.write("[J"),process.stdout.write(s("progress","  "+t.open)),process.stdout.write(Array(r).join(t.complete)),process.stdout.write(Array(o).join(t.incomplete)),process.stdout.write(s("progress",t.close)),t.verbose&&process.stdout.write(s("progress"," "+f+" of "+a))}),e.on("end",function(){i.show(),console.log(),n.epilogue()})}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o,r.colors.progress=90,o.prototype=new r,o.prototype.constructor=o}),e.register("reporters/spec.js",function(e,t,n){function o(e){function a(){return Array(o).join("  ")}r.call(this,e);var t=this,n=this.stats,o=0,u=0;e.on("start",function(){console.log()}),e.on("suite",function(e){++o,console.log(s("suite","%s%s"),a(),e.title)}),e.on("suite end",function(e){--o,1==o&&console.log()}),e.on("test",function(e){process.stdout.write(a()+s("pass","  ◦ "+e.title+": "))}),e.on("pending",function(e){var t=a()+s("pending","  - %s");console.log(t,e.title)}),e.on("pass",function(e){if("fast"==e.speed){var t=a()+s("checkmark","  ✓")+s("pass"," %s ");i.CR(),console.log(t,e.title)}else{var t=a()+s("checkmark","  ✓")+s("pass"," %s ")+s(e.speed,"(%dms)");i.CR(),console.log(t,e.title,e.duration)}}),e.on("fail",function(e,t){i.CR(),console.log(a()+s("fail","  %d) %s"),++u,e.title)}),e.on("end",t.epilogue.bind(t))}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o,o.prototype=new r,o.prototype.constructor=o}),e.register("reporters/tap.js",function(e,t,n){function o(e){r.call(this,e);var t=this,n=this.stats,i=e.total,s=1;e.on("start",function(){console.log("%d..%d",1,i)}),e.on("test end",function(){++s}),e.on("pending",function(e){console.log("ok %d %s # SKIP -",s,u(e))}),e.on("pass",function(e){console.log("ok %d %s",s,u(e))}),e.on("fail",function(e,t){console.log("not ok %d %s",s,u(e)),console.log(t.stack.replace(/^/gm,"  "))})}function u(e){return e.fullTitle().replace(/#/g,"")}var r=n("./base"),i=r.cursor,s=r.color;t=e.exports=o}),e.register("reporters/teamcity.js",function(e,t,n){function i(e){r.call(this,e);var t=this.stats;e.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")}),e.on("test",function(e){console.log("##teamcity[testStarted name='"+s(e.fullTitle())+"']")}),e.on("fail",function(e,t){console.log("##teamcity[testFailed name='"+s(e.fullTitle())+"' message='"+s(t.message)+"']")}),e.on("pending",function(e){console.log("##teamcity[testIgnored name='"+s(e.fullTitle())+"' message='pending']")}),e.on("test end",function(e){console.log("##teamcity[testFinished name='"+s(e.fullTitle())+"' duration='"+e.duration+"']")}),e.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+t.duration+"']")})}function s(e){return e.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}var r=n("./base");t=e.exports=i}),e.register("reporters/xunit.js",function(e,t,n){function c(e){r.call(this,e);var t=this.stats,n=[],i=this;e.on("test end",function(e){n.push(e)}),e.on("end",function(){console.log(p("testsuite",{name:"Mocha Tests",tests:t.tests,failures:t.failures,errors:t.failures,skip:t.tests-t.failures-t.passes,timestamp:(new o).toUTCString(),time:t.duration/1e3},!1)),n.forEach(h),console.log("</testsuite>")})}function h(e){var t={classname:e.parent.fullTitle(),name:e.title,time:e.duration/1e3};if("failed"==e.state){var n=e.err;t.message=s(n.message),console.log(p("testcase",t,!1,p("failure",t,!1,d(n.stack))))}else e.pending?console.log(p("testcase",t,!1,p("skipped",{},!0))):console.log(p("testcase",t,!0))}function p(e,t,n,r){var i=n?"/>":">",o=[],u;for(var a in t)o.push(a+'="'+s(t[a])+'"');return u="<"+e+(o.length?" "+o.join(" "):"")+i,r&&(u+=r+"</"+e+i),u}function d(e){return"<![CDATA["+s(e)+"]]>"}var r=n("./base"),i=n("../utils"),s=i.escape,o=global.Date,u=global.setTimeout,a=global.setInterval,f=global.clearTimeout,l=global.clearInterval;t=e.exports=c,c.prototype=new r,c.prototype.constructor=c}),e.register("runnable.js",function(e,t,n){function l(e,t){this.title=e,this.fn=t,this.async=t&&t.length,this.sync=!this.async,this._timeout=2e3,this.timedOut=!1}var r=n("browser/events").EventEmitter,i=n("browser/debug")("runnable"),s=global.Date,o=global.setTimeout,u=global.setInterval,a=global.clearTimeout,f=global.clearInterval;e.exports=l,l.prototype=new r,l.prototype.constructor=l,l.prototype.timeout=function(e){return 0==arguments.length?this._timeout:(i("timeout %d",e),this._timeout=e,this.timer&&this.resetTimeout(),this)},l.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title},l.prototype.clearTimeout=function(){a(this.timer)},l.prototype.resetTimeout=function(){var e=this,t=this.timeout();this.clearTimeout(),t&&(this.timer=o(function(){e.callback(new Error("timeout of "+t+"ms exceeded")),e.timedOut=!0},t))},l.prototype.run=function(e){function f(){if(a)return;a=!0,t.emit("error",new Error("done() called multiple times"))}function l(n){if(t.timedOut)return;if(u)return f();t.clearTimeout(),t.duration=new s-r,u=!0,e(n)}var t=this,n=this.timeout(),r=new s,i=this.ctx,u,a;i&&i.runnable(this),this.async&&n&&(this.timer=o(function(){l(new Error("timeout of "+n+"ms exceeded")),t.timedOut=!0},n)),this.callback=l;if(this.async){try{this.fn.call(i,function(e){if(e instanceof Error)return l(e);if(null!=e)return l(new Error("done() invoked with non-Error: "+e));l()})}catch(c){l(c)}return}try{this.pending||this.fn.call(i),this.duration=new s-r,e()}catch(c){e(c)}}}),e.register("runner.js",function(e,t,n){function l(e){var t=this;this._globals=[],this.suite=e,this.total=e.total(),this.failures=0,this.on("test end",function(e){t.checkGlobals(e)}),this.on("hook end",function(e){t.checkGlobals(e)}),this.grep(/.*/),this.globals(o.keys(global).concat(["errno"]))}function c(e){return u(a(global),function(t){var n=u(e,function(e){return 0==t.indexOf(e.split("*")[0])});return n.length==0&&(!global.navigator||"onerror"!==t)})}var r=n("browser/events").EventEmitter,i=n("browser/debug")("runner"),s=n("./test"),o=n("./utils"),u=o.filter,a=o.keys,f=function(){};e.exports=l,l.prototype=new r,l.prototype.constructor=l,l.prototype.grep=function(e){return i("grep %s",e),this._grep=e,this.total=this.grepTotal(this.suite),this},l.prototype.grepTotal=function(e){var t=this,n=0;return e.eachTest(function(e){t._grep.test(e.fullTitle())&&n++}),n},l.prototype.globals=function(e){return 0==arguments.length?this._globals:(i("globals %j",e),o.forEach(e,function(e){this._globals.push(e)},this),this)},l.prototype.checkGlobals=function(e){if(this.ignoreLeaks)return;var t=c(this._globals);this._globals=this._globals.concat(t),t.length>1?this.fail(e,new Error("global leaks detected: "+t.join(", ")+"")):t.length&&this.fail(e,new Error("global leak detected: "+t[0]))},l.prototype.fail=function(e,t){++this.failures,e.state="failed","string"==typeof t&&(t=new Error('the string "'+t+'" was thrown, throw an Error :)')),this.emit("fail",e,t)},l.prototype.failHook=function(e,t){this.fail(e,t),this.emit("end")},l.prototype.hook=function(e,t){function u(e){var n=r[e];if(!n)return t();s.currentRunnable=n,s.emit("hook",n),n.on("error",function(e){s.failHook(n,e)}),n.run(function(t){n.removeAllListeners("error");if(t)return s.failHook(n,t);s.emit("hook end",n),u(++e)})}var n=this.suite,r=n["_"+e],i=n._timeout,s=this,o;process.nextTick(function(){u(0)})},l.prototype.hooks=function(e,t,n){function s(o){r.suite=o;if(!o)return r.suite=i,n();r.hook(e,function(e){if(e)return r.suite=i,n(e);s(t.pop())})}var r=this,i=this.suite;s(t.pop())},l.prototype.hookUp=function(e,t){var n=[this.suite].concat(this.parents()).reverse();this.hooks(e,n,t)},l.prototype.hookDown=function(e,t){var n=[this.suite].concat(this.parents());this.hooks(e,n,t)},l.prototype.parents=function(){var e=this.suite,t=[];while(e=e.parent)t.push(e);return t},l.prototype.runTest=function(e){var t=this.test,n=this;try{t.on("error",function(e){n.fail(t,e)}),t.run(e)}catch(r){e(r)}},l.prototype.runTests=function(e,t){function s(o){if(n.failures&&e._bail)return t();i=r.shift();if(!i)return t();if(!n._grep.test(i.fullTitle()))return s();if(i.pending)return n.emit("pending",i),n.emit("test end",i),s();n.emit("test",n.test=i),n.hookDown("beforeEach",function(){n.currentRunnable=n.test,n.runTest(function(e){i=n.test;if(e)return n.fail(i,e),n.emit("test end",i),n.hookUp("afterEach",s);i.state="passed",n.emit("pass",i),n.emit("test end",i),n.hookUp("afterEach",s)})})}var n=this,r=e.tests,i;this.next=s,s()},l.prototype.runSuite=function(e,t){function o(){var t=e.suites[s++];if(!t)return u();r.runSuite(t,o)}function u(){r.suite=e,r.hook("afterAll",function(){r.emit("suite end",e),t()})}var n=this.grepTotal(e),r=this,s=0;i("run suite %s",e.fullTitle());if(!n)return t();this.emit("suite",this.suite=e),this.hook("beforeAll",function(){r.runTests(e,o)})},l.prototype.uncaught=function(e){i("uncaught exception");var t=this.currentRunnable;if("failed"==t.state)return;t.clearTimeout(),e.uncaught=!0,this.fail(t,e);if("test"==t.type){this.emit("test end",t),this.hookUp("afterEach",this.next);return}this.emit("end")},l.prototype.run=function(e){function n(e){t.uncaught(e)}var t=this,e=e||function(){};return i("start"),this.on("end",function(){i("end"),process.removeListener("uncaughtException",n),e(t.failures)}),this.emit("start"),this.runSuite(this.suite,function(){i("finished running"),t.emit("end")}),process.on("uncaughtException",n),this}}),e.register("suite.js",function(e,t,n){function u(e,t){this.title=e,this.ctx=t,this.suites=[],this.tests=[],this._beforeEach=[],this._beforeAll=[],this._afterEach=[],this._afterAll=[],this.root=!e,this._timeout=2e3,this._bail=!1}var r=n("browser/events").EventEmitter,i=n("browser/debug")("suite"),s=n("./utils"),o=n("./hook");t=e.exports=u,t.create=function(e,t){var n=new u(t,e.ctx);return n.parent=e,t=n.fullTitle(),e.addSuite(n),n},u.prototype=new r,u.prototype.constructor=u,u.prototype.clone=function(){var e=new u(this.title);return i("clone"),e.ctx=this.ctx,e.timeout(this.timeout()),e.bail(this.bail()),e},u.prototype.timeout=function(e){return 0==arguments.length?this._timeout:(String(e).match(/s$/)&&(e=parseFloat(e)*1e3),i("timeout %d",e),this._timeout=parseInt(e,10),this)},u.prototype.bail=function(e){return 0==arguments.length?this._bail:(i("bail %s",e),this._bail=e,this)},u.prototype.beforeAll=function(e){var t=new o('"before all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.ctx=this.ctx,this._beforeAll.push(t),this.emit("beforeAll",t),this},u.prototype.afterAll=function(e){var t=new o('"after all" hook',e);return t.parent=this,t.timeout(this.timeout()),t.ctx=this.ctx,this._afterAll.push(t),this.emit("afterAll",t),this},u.prototype.beforeEach=function(e){var t=new o('"before each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.ctx=this.ctx,this._beforeEach.push(t),this.emit("beforeEach",t),this},u.prototype.afterEach=function(e){var t=new o('"after each" hook',e);return t.parent=this,t.timeout(this.timeout()),t.ctx=this.ctx,this._afterEach.push(t),this.emit("afterEach",t),this},u.prototype.addSuite=function(e){return e.parent=this,e.timeout(this.timeout()),e.bail(this.bail()),this.suites.push(e),this.emit("suite",e),this},u.prototype.addTest=function(e){return e.parent=this,e.timeout(this.timeout()),e.ctx=this.ctx,this.tests.push(e),this.emit("test",e),this},u.prototype.fullTitle=function(){if(this.parent){var e=this.parent.fullTitle();if(e)return e+" "+this.title}return this.title},u.prototype.total=function(){return s.reduce(this.suites,function(e,t){return e+t.total()},0)+this.tests.length},u.prototype.eachTest=function(e){return s.forEach(this.tests,e),s.forEach(this.suites,function(t){t.eachTest(e)}),this}}),e.register("test.js",function(e,t,n){function i(e,t){r.call(this,e,t),this.pending=!t,this.type="test"}var r=n("./runnable");e.exports=i,i.prototype=new r,i.prototype.constructor=i,i.prototype.inspect=function(){return JSON.stringify(this,function(e,t){return"_"==e[0]?undefined:"parent"==e?"#<Suite>":t},2)}}),e.register("utils.js",function(e,t,n){function a(e){return!~u.indexOf(e)}var r=n("browser/fs"),i=n("browser/path"),s=i.join,o=n("browser/debug")("watch"),u=["node_modules",".git"];t.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},t.forEach=function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r)},t.indexOf=function(e,t,n){for(var r=n||0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},t.reduce=function(e,t,n,r){var i=n;for(var s=0,o=e.length;s<o;s++)i=t.call(r,i,e[s],s,e);return i},t.filter=function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];t.call(n,o,i,e)&&r.push(o)}return r},t.keys=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t},t.watch=function(e,t){var n={interval:100};e.forEach(function(e){o("file %s",e),r.watchFile(e,n,function(n,r){r.mtime<n.mtime&&t(e)})})},t.files=function(e,n){return n=n||[],r.readdirSync(e).filter(a).forEach(function(i){i=s(e,i),r.statSync(i).isDirectory()?t.files(i,n):i.match(/\.(js|coffee)$/)&&n.push(i)}),n},t.slug=function(e){return e.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")},t.clean=function(e){e=e.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var t=e.match(/^\n?( *)/)[1].length,n=new RegExp("^ {"+t+"}","gm");return e=e.replace(n,""),e.trim()},t.escapeRegexp=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")}}),process={},process.exit=function(e){},process.stdout={},global=window,process.nextTick=function(){if(window.ActiveXObject||!window.postMessage)return function(e){e()};var e=[],t="mocha-zero-timeout";return window.addEventListener("message",function(n){n.source==window&&n.data==t&&(n.stopPropagation&&n.stopPropagation(),e.length&&e.shift()())},!0),function(n){e.push(n),window.postMessage(t,"*")}}(),process.removeListener=function(e){"uncaughtException"==e&&(window.onerror=null)},process.on=function(e,t){"uncaughtException"==e&&(window.onerror=t)},window.mocha=e("mocha"),function(){function r(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}function i(){var e=document.getElementsByTagName("code");for(var t=0,n=e.length;t<n;++t)e[t].innerHTML=r(e[t].innerHTML)}function s(e){return t.reduce(e.replace("?","").split("&"),function(e,t){var n=t.indexOf("="),r=t.slice(0,n),i=t.slice(++n);return e[r]=decodeURIComponent(i),e},{})}var e=new mocha.Suite("",new mocha.Context),t=mocha.utils,n={};mocha.setup=function(t){"string"==typeof t?n.ui=t:n=t,ui=mocha.interfaces[n.ui];if(!ui)throw new Error('invalid mocha interface "'+ui+'"');n.timeout&&e.timeout(n.timeout),ui(e),e.emit("pre-require",window)},mocha.run=function(t){e.emit("run");var r=new mocha.Runner(e),o=n.reporter||mocha.reporters.HTML,u=new o(r),a=s(window.location.search||"");return a.grep&&r.grep(new RegExp(a.grep)),n.ignoreLeaks&&(r.ignoreLeaks=!0),n.globals&&r.globals(n.globals),r.globals(["location"]),r.on("end",i),r.run(t)}}()}(),"use strict";var sinon=function(){var buster=function(e,t){function n(e){if(!e)return;for(var t=1,n=arguments.length,r;t<n;++t)for(r in arguments[t])e[r]=arguments[t][r];return e}var r=typeof document!="undefined"&&document.createElement("div");return n(e,{bind:function(e,t){var n=typeof t=="string"?e[t]:t,r=Array.prototype.slice.call(arguments,2);return function(){var t=r.concat(Array.prototype.slice.call(arguments));return n.apply(e,t)}},create:function(){function e(){}return function(n){return e.prototype=n,new e}}(),extend:n,nextTick:function(e){if(typeof process!="undefined"&&process.nextTick)return process.nextTick(e);t(e,0)},functionName:function(e){if(!e)return"";if(e.displayName)return e.displayName;if(e.name)return e.name;var t=e.toString().match(/function\s+([^\(]+)/m);return t&&t[1]||""},isNode:function(e){if(!r)return!1;try{e.appendChild(r),e.removeChild(r)}catch(t){return!1}return!0},isElement:function(t){return t&&e.isNode(t)&&t.nodeType===1}})}(buster||{},setTimeout);typeof module=="object"&&typeof require=="function"&&(module.exports=buster,buster.eventEmitter=require("./buster-event-emitter"),Object.defineProperty(buster,"defineVersionGetter",{get:function(){return require("./define-version-getter")}}));if(typeof buster=="undefined")var buster={};typeof module=="object"&&typeof require=="function"&&(buster=require("buster-core")),buster.format=buster.format||{},buster.format.excludeConstructors=["Object",/^.$/],buster.format.quoteStrings=!0,buster.format.ascii=function(){function e(e){var t=Object.keys&&Object.keys(e)||[];if(t.length==0)for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t.sort()}function t(e,t){if(typeof e!="object")return!1;for(var n=0,r=t.length;n<r;++n)if(t[n]===e)return!0;return!1}function n(e,r,i){if(typeof e=="string"){var s=typeof this.quoteStrings!="boolean"||this.quoteStrings;return r||s?'"'+e+'"':e}return typeof e!="function"||e instanceof RegExp?(r=r||[],t(e,r)?"[Circular]":Object.prototype.toString.call(e)=="[object Array]"?n.array.call(this,e):e?buster.isElement(e)?n.element(e):typeof e.toString=="function"&&e.toString!==Object.prototype.toString?e.toString():n.object.call(this,e,r,i):""+e):n.func(e)}return n.func=function(e){return"function "+buster.functionName(e)+"() {}"},n.array=function(e,t){t=t||[],t.push(e);var r=[];for(var i=0,s=e.length;i<s;++i)r.push(n.call(this,e[i],t));return"["+r.join(", ")+"]"},n.object=function(r,i,s){i=i||[],i.push(r),s=s||0;var o=[],u=e(r),a,f,l,c="",h=3;for(var p=0,d=s;p<d;++p)c+=" ";for(p=0,d=u.length;p<d;++p)a=u[p],l=r[a],t(l,i)?f="[Circular]":f=n.call(this,l,i,s+2),f=(/\s/.test(a)?'"'+a+'"':a)+": "+f,h+=f.length,o.push(f);var v=n.constructorName.call(this,r),m=v?"["+v+"] ":"";return h+s>80?m+"{\n  "+c+o.join(",\n  "+c)+"\n"+c+"}":m+"{ "+o.join(", ")+" }"},n.element=function(e){var t=e.tagName.toLowerCase(),n=e.attributes,r,i=[],s;for(var o=0,u=n.length;o<u;++o){r=n.item(o),s=r.nodeName.toLowerCase().replace("html:","");if(s=="contenteditable"&&r.nodeValue=="inherit")continue;!r.nodeValue||i.push(s+'="'+r.nodeValue+'"')}var a="<"+t+(i.length>0?" ":""),f=e.innerHTML;f.length>20&&(f=f.substr(0,20)+"[...]");var l=a+i.join(" ")+">"+f+"</"+t+">";return l.replace(/ contentEditable="inherit"/,"")},n.constructorName=function(e){var t=buster.functionName(e&&e.constructor),n=this.excludeConstructors||buster.format.excludeConstructors||[];for(var r=0,i=n.length;r<i;++r){if(typeof n[r]=="string"&&n[r]==t)return"";if(n[r].test&&n[r].test(t))return""}return t},n}(),typeof module!="undefined"&&(module.exports=buster.format);var sinon=function(e){function r(e){var n=!1;try{e.appendChild(t),n=t.parentNode==e}catch(r){return!1}finally{try{e.removeChild(t)}catch(r){}}return n}function i(e){return t&&e&&e.nodeType===1&&r(e)}function s(e){return!!(e&&e.constructor&&e.call&&e.apply)}function o(e,t){for(var r in t)n.call(e,r)||(e[r]=t[r])}var t=typeof document!="undefined"&&document.createElement("div"),n=Object.prototype.hasOwnProperty,u={wrapMethod:function(t,r,i){if(!t)throw new TypeError("Should wrap property of object");if(typeof i!="function")throw new TypeError("Method wrapper should be function");var u=t[r];if(!s(u))throw new TypeError("Attempted to wrap "+typeof u+" property "+r+" as function");if(u.restore&&u.restore.sinon)throw new TypeError("Attempted to wrap "+r+" which is already wrapped");if(u.calledBefore){var a=u.returns?"stubbed":"spied on";throw new TypeError("Attempted to wrap "+r+" which is already "+a)}var f=n.call(t,r);return t[r]=i,i.displayName=r,i.restore=function(){f?t[r]=u:delete t[r]},i.restore.sinon=!0,o(i,u),i},extend:function(t){for(var n=1,r=arguments.length;n<r;n+=1)for(var i in arguments[n])arguments[n].hasOwnProperty(i)&&(t[i]=arguments[n][i]),arguments[n].hasOwnProperty("toString")&&arguments[n].toString!=t.toString&&(t.toString=arguments[n].toString);return t},create:function(t){var n=function(){};return n.prototype=t,new n},deepEqual:function h(e,t){if(typeof e!="object"||typeof t!="object")return e===t;if(i(e)||i(t))return e===t;if(e===t)return!0;var n=Object.prototype.toString.call(e);if(n!=Object.prototype.toString.call(t))return!1;if(n=="[object Array]"){if(e.length!==t.length)return!1;for(var r=0,s=e.length;r<s;r+=1)if(!h(e[r],t[r]))return!1;return!0}var o,u=0,a=0;for(o in e){u+=1;if(!h(e[o],t[o]))return!1}for(o in t)a+=1;return u!=a?!1:!0},functionName:function(t){var n=t.displayName||t.name;if(!n){var r=t.toString().match(/function ([^\s\(]+)/);n=r&&r[1]}return n},functionToString:function p(){if(this.getCall&&this.callCount){var e,t,n=this.callCount;while(n--){e=this.getCall(n).thisValue;for(t in e)if(e[t]===this)return t}}return this.displayName||"sinon fake"},getConfig:function(e){var t={};e=e||{};var n=u.defaultConfig;for(var r in n)n.hasOwnProperty(r)&&(t[r]=e.hasOwnProperty(r)?e[r]:n[r]);return t},format:function(e){return""+e},defaultConfig:{injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},timesInWords:function(t){return t==1&&"once"||t==2&&"twice"||t==3&&"thrice"||(t||0)+" times"},calledInOrder:function(e){for(var t=1,n=e.length;t<n;t++)if(!e[t-1].calledBefore(e[t]))return!1;return!0},orderByFirstCall:function(e){return e.sort(function(e,t){var n=e.getCall(0),r=t.getCall(0),i=n&&n.callId||-1,s=r&&r.callId||-1;return i<s?-1:1})},log:function(){},logError:function(e,t){var n=e+" threw exception: ";u.log(n+"["+t.name+"] "+t.message),t.stack&&u.log(t.stack),setTimeout(function(){throw t.message=n+t.message,t},0)}},a=typeof module=="object"&&typeof require=="function";if(a){try{e={format:require("buster-format")}}catch(f){}module.exports=u,module.exports.spy=require("./sinon/spy"),module.exports.stub=require("./sinon/stub"),module.exports.mock=require("./sinon/mock"),module.exports.collection=require("./sinon/collection"),module.exports.assert=require("./sinon/assert"),module.exports.sandbox=require("./sinon/sandbox"),module.exports.test=require("./sinon/test"),module.exports.testCase=require("./sinon/test_case"),module.exports.assert=require("./sinon/assert")}if(e){var l=u.create(e.format);l.quoteStrings=!1,u.format=function(){return l.ascii.apply(l,arguments)}}else if(a)try{var c=require("util");u.format=function(e){return typeof e=="object"?c.inspect(e):e}}catch(f){}return u}(typeof buster=="object"&&buster);(function(e){function o(t,n){if(!n&&typeof t=="function")return o.create(t);if(!t||!n)return o.create(function(){});var r=t[n];return e.wrapMethod(t,n,o.create(r))}var t=typeof module=="object"&&typeof require=="function",n,r=0,i=[].push,s=Array.prototype.slice;!e&&t&&(e=require("../sinon"));if(!e)return;e.extend(o,function(){function t(e,t,n,r,i){e[t]=function(){if(!this.called)return i?i.apply(this,arguments):!1;var e,s=0;for(var o=0,u=this.callCount;o<u;o+=1){e=this.getCall(o);if(e[r||t].apply(e,arguments)){s+=1;if(n)return!0}}return s===this.callCount}}function u(e,t,n){if(!e)return;var r=t.length;for(var i=0,s=e.length;i<s;i++)if(e[i].matches(t,n))return e[i]}function a(){this.called=!0,this.callCount+=1,this.calledOnce=this.callCount==1,this.calledTwice=this.callCount==2,this.calledThrice=this.callCount==3}function f(){this.firstCall=this.getCall(0),this.secondCall=this.getCall(1),this.thirdCall=this.getCall(2),this.lastCall=this.getCall(this.callCount-1)}var l=0,c={reset:function(){this.called=!1,this.calledOnce=!1,this.calledTwice=!1,this.calledThrice=!1,this.callCount=0,this.firstCall=null,this.secondCall=null,this.thirdCall=null,this.lastCall=null,this.args=[],this.returnValues=[],this.thisValues=[],this.exceptions=[],this.callIds=[]},create:function(n){function i(){return i.invoke(n,this,s.call(arguments))}var r;return typeof n!="function"?n=function(){}:r=e.functionName(n),e.extend(i,o),delete i.create,e.extend(i,n),i.reset(),i.prototype=n.prototype,i.displayName=r||"spy",i.toString=e.functionToString,i._create=e.spy.create,i.id="spy#"+l++,i},invoke:function(t,n,s){var o=u(this.fakes,s),l,c;a.call(this),i.call(this.thisValues,n),i.call(this.args,s),i.call(this.callIds,r++);try{o?c=o.invoke(t,n,s):c=(this.func||t).apply(n,s)}catch(h){throw i.call(this.returnValues,undefined),l=h,h}finally{i.call(this.exceptions,l)}return i.call(this.returnValues,c),f.call(this),c},getCall:function(t){return t<0||t>=this.callCount?null:n.create(this,this.thisValues[t],this.args[t],this.returnValues[t],this.exceptions[t],this.callIds[t])},calledBefore:function(t){return this.called?t.called?this.callIds[0]<t.callIds[t.callIds.length-1]:!0:!1},calledAfter:function(t){return!this.called||!t.called?!1:this.callIds[this.callCount-1]>t.callIds[t.callCount-1]},withArgs:function(){var e=s.call(arguments);if(this.fakes){var t=u(this.fakes,e,!0);if(t)return t}else this.fakes=[];var n=this,r=this._create();r.matchingAguments=e,i.call(this.fakes,r),r.withArgs=function(){return n.withArgs.apply(n,arguments)};for(var o=0;o<this.args.length;o++)r.matches(this.args[o])&&(a.call(r),i.call(r.thisValues,this.thisValues[o]),i.call(r.args,this.args[o]),i.call(r.returnValues,this.returnValues[o]),i.call(r.exceptions,this.exceptions[o]),i.call(r.callIds,this.callIds[o]));return f.call(r),r},matches:function(t,n){var r=this.matchingAguments;if(r.length<=t.length&&e.deepEqual(r,t.slice(0,r.length)))return!n||r.length==t.length},printf:function(t){var n=this,r=s.call(arguments,1),i;return(t||"").replace(/%(.)/g,function(t,s){return i=c.formatters[s],typeof i=="function"?i.call(null,n,r):isNaN(parseInt(s),10)?"%"+s:e.format(r[s-1])})}};return t(c,"calledOn",!0),t(c,"alwaysCalledOn",!1,"calledOn"),t(c,"calledWith",!0),t(c,"alwaysCalledWith",!1,"calledWith"),t(c,"calledWithExactly",!0),t(c,"alwaysCalledWithExactly",!1,"calledWithExactly"),t(c,"neverCalledWith",!1,"notCalledWith",function(){return!0}),t(c,"threw",!0),t(c,"alwaysThrew",!1,"threw"),t(c,"returned",!0),t(c,"alwaysReturned",!1,"returned"),t(c,"calledWithNew",!0),t(c,"alwaysCalledWithNew",!1,"calledWithNew"),t(c,"callArg",!1,"callArgWith",function(){throw new Error(this.toString()+" cannot call arg since it was not yet invoked.")}),c.callArgWith=c.callArg,t(c,"yield",!1,"yield",function(){throw new Error(this.toString()+" cannot yield since it was not yet invoked.")}),c.invokeCallback=c.yield,t(c,"yieldTo",!1,"yieldTo",function(e){throw new Error(this.toString()+" cannot yield to '"+e+"' since it was not yet invoked.")}),c.formatters={c:function(t){return e.timesInWords(t.callCount)},n:function(e){return e.toString()},C:function(e){var t=[];for(var n=0,r=e.callCount;n<r;++n)i.call(t,"    "+e.getCall(n).toString());return t.length>0?"\n"+t.join("\n"):""},t:function(t){var n=[];for(var r=0,s=t.callCount;r<s;++r)i.call(n,e.format(t.thisValues[r]));return n.join(", ")},"*":function(e,t){return t.join(", ")}},c}()),n=function(){function t(t,n,r){var i=e.functionName(t)+n;throw r.length&&(i+=" Received ["+s.call(r).join(", ")+"]"),new Error(i)}return{create:function(i,s,o,u,a,f){var l=e.create(n);return delete l.create,l.proxy=i,l.thisValue=s,l.args=o,l.returnValue=u,l.exception=a,l.callId=typeof f=="number"&&f||r++,l},calledOn:function(t){return this.thisValue===t},calledWith:function(){for(var n=0,r=arguments.length;n<r;n+=1)if(!e.deepEqual(arguments[n],this.args[n]))return!1;return!0},calledWithExactly:function(){return arguments.length==this.args.length&&this.calledWith.apply(this,arguments)},notCalledWith:function(){for(var n=0,r=arguments.length;n<r;n+=1)if(!e.deepEqual(arguments[n],this.args[n]))return!0;return!1},returned:function(t){return this.returnValue===t},threw:function(t){return typeof t=="undefined"||!this.exception?!!this.exception:typeof t=="string"?this.exception.name==t:this.exception===t},calledWithNew:function(t){return this.thisValue instanceof this.proxy},calledBefore:function(e){return this.callId<e.callId},calledAfter:function(e){return this.callId>e.callId},callArg:function(e){this.args[e]()},callArgWith:function(e){var t=s.call(arguments,1);this.args[e].apply(null,t)},yield:function(){var e=this.args;for(var n=0,r=e.length;n<r;++n)if(typeof e[n]=="function"){e[n].apply(null,s.call(arguments));return}t(this.proxy," cannot yield since no callback was passed.",e)},yieldTo:function(e){var n=this.args;for(var r=0,i=n.length;r<i;++r)if(n[r]&&typeof n[r][e]=="function"){n[r][e].apply(null,s.call(arguments,1));return}t(this.proxy," cannot yield to '"+e+"' since no callback was passed.",n)},toString:function(){var t=this.proxy.toString()+"(",n=[];for(var r=0,s=this.args.length;r<s;++r)i.call(n,e.format(this.args[r]));return t=t+n.join(", ")+")",typeof this.returnValue!="undefined"&&(t+=" => "+e.format(this.returnValue)),this.exception&&(t+=" !"+this.exception.name,this.exception.message&&(t+="("+this.exception.message+")")),t}}}(),o.spyCall=n,e.spyCall=n,t?module.exports=o:e.spy=o})(typeof sinon=="object"&&sinon||null),function(e){function n(t,r,i){if(!i||typeof i=="function"){var s;i?s=e.spy&&e.spy.create?e.spy.create(i):i:s=n.create();if(!t&&!r)return e.stub.create();if(!r&&!!t&&typeof t=="object"){for(var o in t)typeof t[o]=="function"&&n(t,o);return t}return e.wrapMethod(t,r,s)}throw new TypeError("Custom stub should be function")}function r(e,t){if(e.callArgAt<0){for(var n=0,r=t.length;n<r;++n){if(!e.callArgProp&&typeof t[n]=="function")return t[n];if(e.callArgProp&&t[n]&&typeof t[n][e.callArgProp]=="function")return t[n][e.callArgProp]}return null}return t[e.callArgAt]}function s(t,n,r){if(t.callArgAt<0){var s;return t.callArgProp?s=e.functionName(t)+" expected to yield to '"+t.callArgProp+"', but no object with such a property was passed.":s=e.functionName(t)+" expected to yield, but no callback was passed.",r.length>0&&(s+=" Received ["+i.call(r,", ")+"]"),s}return"argument at index "+t.callArgAt+" is not a function: "+n}function o(e,t){if(typeof e.callArgAt=="number"){var n=r(e,t);if(typeof n!="function")throw new TypeError(s(e,n,t));n.apply(e.callbackContext,e.callbackArguments)}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;var i=Array.prototype.join,u=0;e.extend(n,function(){function r(e,t){return typeof e=="string"?(this.exception=new Error(t||""),this.exception.name=e):e?this.exception=e:this.exception=new Error("Error"),this}var t=Array.prototype.slice;return{create:function(){var r=function(){if(r.exception)throw r.exception;return typeof r.returnArgAt=="number"?arguments[r.returnArgAt]:(o(r,arguments),r.returnValue)};r.id="stub#"+u++;var i=r;return r=e.spy.create(r),r.func=i,e.extend(r,n),r._create=e.stub.create,r.displayName="stub",r.toString=e.functionToString,r},returns:function(t){return this.returnValue=t,this},returnsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.returnArgAt=t,this},"throws":r,throwsException:r,callsArg:function(t){if(typeof t!="number")throw new TypeError("argument index is not number");return this.callArgAt=t,this.callbackArguments=[],this},callsArgOn:function(t,n){if(typeof t!="number")throw new TypeError("argument index is not number");if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAt=t,this.callbackArguments=[],this.callbackContext=n,this},callsArgWith:function(n){if(typeof n!="number")throw new TypeError("argument index is not number");return this.callArgAt=n,this.callbackArguments=t.call(arguments,1),this},callsArgOnWith:function(n,r){if(typeof n!="number")throw new TypeError("argument index is not number");if(typeof r!="object")throw new TypeError("argument context is not an object");return this.callArgAt=n,this.callbackArguments=t.call(arguments,2),this.callbackContext=r,this},yields:function(){return this.callArgAt=-1,this.callbackArguments=t.call(arguments,0),this},yieldsOn:function(e){if(typeof e!="object")throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callbackArguments=t.call(arguments,1),this.callbackContext=e,this},yieldsTo:function(e){return this.callArgAt=-1,this.callArgProp=e,this.callbackArguments=t.call(arguments,1),this},yieldsToOn:function(e,n){if(typeof n!="object")throw new TypeError("argument context is not an object");return this.callArgAt=-1,this.callArgProp=e,this.callbackArguments=t.call(arguments,2),this.callbackContext=n,this}}}()),t?module.exports=n:e.stub=n}(typeof sinon=="object"&&sinon||null),function(e){function r(t){return t?r.create(t):e.expectation.create("Anonymous mock")}var t=typeof module=="object"&&typeof require=="function",n=[].push;!e&&t&&(e=require("../sinon"));if(!e)return;e.mock=r,e.extend(r,function(){function t(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}return{create:function(n){if(!n)throw new TypeError("object is null");var i=e.extend({},r);return i.object=n,delete i.create,i},expects:function(r){if(!r)throw new TypeError("method is falsy");this.expectations||(this.expectations={},this.proxies=[]);if(!this.expectations[r]){this.expectations[r]=[];var i=this;e.wrapMethod(this.object,r,function(){return i.invokeMethod(r,this,arguments)}),n.call(this.proxies,r)}var s=e.expectation.create(r);return n.call(this.expectations[r],s),s},restore:function(){var n=this.object;t(this.proxies,function(e){typeof n[e].restore=="function"&&n[e].restore()})},verify:function(){var i=this.expectations||{},s=[],o=[];return t(this.proxies,function(e){t(i[e],function(e){e.met()?n.call(o,e.toString()):n.call(s,e.toString())})}),this.restore(),s.length>0&&e.expectation.fail(s.concat(o).join("\n")),!0},invokeMethod:function(r,i,s){var o=this.expectations&&this.expectations[r],u=o&&o.length||0;for(var a=0;a<u;a+=1)if(!o[a].met()&&o[a].allowsCall(i,s))return o[a].apply(i,s);var f=[];for(a=0;a<u;a+=1)n.call(f,"    "+o[a].toString());f.unshift("Unexpected call: "+e.spyCall.toString.call({proxy:r,args:s})),e.expectation.fail(f.join("\n"))}}}());var i=e.timesInWords;e.expectation=function(){function s(e){return e==0?"never called":"called "+i(e)}function o(e){var t=e.minCalls,n=e.maxCalls;if(typeof t=="number"&&typeof n=="number"){var r=i(t);return t!=n&&(r="at least "+r+" and at most "+i(n)),r}return typeof t=="number"?"at least "+i(t):"at most "+i(n)}function u(e){var t=typeof e.minCalls=="number";return!t||e.callCount>=e.minCalls}function a(e){return typeof e.maxCalls!="number"?!1:e.callCount==e.maxCalls}var t=Array.prototype.slice,r=e.spy.invoke;return{minCalls:1,maxCalls:1,create:function(n){var r=e.extend(e.stub.create(),e.expectation);return delete r.create,r.method=n,r},invoke:function(t,n,i){return this.verifyCallAllowed(n,i),r.apply(this,arguments)},atLeast:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.maxCalls=null,this.limitsSet=!0),this.minCalls=t,this},atMost:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not number");return this.limitsSet||(this.minCalls=null,this.limitsSet=!0),this.maxCalls=t,this},never:function(){return this.exactly(0)},once:function(){return this.exactly(1)},twice:function(){return this.exactly(2)},thrice:function(){return this.exactly(3)},exactly:function(t){if(typeof t!="number")throw new TypeError("'"+t+"' is not a number");return this.atLeast(t),this.atMost(t)},met:function(){return!this.failed&&u(this)},verifyCallAllowed:function(n,r){a(this)&&(this.failed=!0,e.expectation.fail(this.method+" already called "+i(this.maxCalls))),"expectedThis"in this&&this.expectedThis!==n&&e.expectation.fail(this.method+" called with "+n+" as thisValue, expected "+this.expectedThis);if(!("expectedArguments"in this))return;(!r||r.length===0)&&e.expectation.fail(this.method+" received no arguments, expected "+this.expectedArguments.join()),r.length<this.expectedArguments.length&&e.expectation.fail(this.method+" received too few arguments ("+r.join()+"), expected "+this.expectedArguments.join()),this.expectsExactArgCount&&r.length!=this.expectedArguments.length&&e.expectation.fail(this.method+" received too many arguments ("+r.join()+"), expected "+this.expectedArguments.join());for(var s=0,o=this.expectedArguments.length;s<o;s+=1)e.deepEqual(this.expectedArguments[s],r[s])||e.expectation.fail(this.method+" received wrong arguments ("+r.join()+"), expected "+this.expectedArguments.join())},allowsCall:function(n,r){if(this.met())return!1;if("expectedThis"in this&&this.expectedThis!==n)return!1;if("expectedArguments"in this){r=r||[];if(r.length<this.expectedArguments.length)return!1;if(this.expectsExactArgCount&&r.length!=this.expectedArguments.length)return!1;for(var i=0,s=this.expectedArguments.length;i<s;i+=1)if(!e.deepEqual(this.expectedArguments[i],r[i]))return!1;return!0}return!0},withArgs:function(){return this.expectedArguments=t.call(arguments),this},withExactArgs:function(){return this.withArgs.apply(this,arguments),this.expectsExactArgCount=!0,this},on:function(t){return this.expectedThis=t,this},toString:function(){var t=(this.expectedArguments||[]).slice();this.expectsExactArgCount||n.call(t,"[...]");var r=e.spyCall.toString.call({proxy:this.method,args:t}),i=r.replace(", [...","[, ...")+" "+o(this);return this.met()?"Expectation met: "+i:"Expected "+i+" ("+s(this.callCount)+")"},verify:function(){return this.met()||e.expectation.fail(this.toString()),!0},fail:function(e){var t=new Error(e);throw t.name="ExpectationError",t}}}(),t?module.exports=r:e.mock=r}(typeof sinon=="object"&&sinon||null),function(e){function r(e){return e.fakes||(e.fakes=[]),e.fakes}function i(e,t){var n=r(e);for(var i=0,s=n.length;i<s;i+=1)typeof n[i][t]=="function"&&n[i][t]()}function s(e){var t=r(e),n=0;while(n<t.length)t.splice(n,1)}var t=typeof module=="object"&&typeof require=="function",n=[].push;!e&&t&&(e=require("../sinon"));if(!e)return;var o={verify:function(){i(this,"verify")},restore:function(){i(this,"restore"),s(this)},verifyAndRestore:function(){var t;try{this.verify()}catch(n){t=n}this.restore();if(t)throw t},add:function(t){return n.call(r(this),t),t},spy:function(){return this.add(e.spy.apply(e,arguments))},stub:function(n,r,i){if(r){var s=n[r];if(typeof s!="function"){if(!n.hasOwnProperty(r))throw new TypeError("Cannot stub non-existent own property "+r);return n[r]=i,this.add({restore:function(){n[r]=s}})}}return this.add(e.stub.apply(e,arguments))},mock:function(){return this.add(e.mock.apply(e,arguments))},inject:function(t){var n=this;return t.spy=function(){return n.spy.apply(n,arguments)},t.stub=function(){return n.stub.apply(n,arguments)},t.mock=function(){return n.mock.apply(n,arguments)},t}};t?module.exports=o:e.collection=o}(typeof sinon=="object"&&sinon||null);if(typeof sinon=="undefined")var sinon={};(function(global){function addTimer(e,t){if(e.length===0)throw new Error("Function requires at least 1 parameter");var n=id++,r=e[1]||0;return this.timeouts||(this.timeouts={}),this.timeouts[n]={id:n,func:e[0],callAt:this.now+r},t===!0&&(this.timeouts[n].interval=r),n}function parseTime(e){if(!e)return 0;var t=e.split(":"),n=t.length,r=n,i=0,s;if(n>3||!/^(\d\d:){0,2}\d\d?$/.test(e))throw new Error("tick only understands numbers and 'h:m:s'");while(r--){s=parseInt(t[r],10);if(s>=60)throw new Error("Invalid time "+e);i+=s*Math.pow(60,n-r-1)}return i*1e3}function createObject(e){var t;if(Object.create)t=Object.create(e);else{var n=function(){};n.prototype=e,t=new n}return t.Date.clock=t,t}function mirrorDateProperties(e,t){return t.now?e.now=function(){return e.clock.now}:delete e.now,t.toSource?e.toSource=function(){return t.toSource()}:delete e.toSource,e.toString=function n(){return t.toString()},e.prototype=t.prototype,e.parse=t.parse,e.UTC=t.UTC,e.prototype.toUTCString=t.prototype.toUTCString,e}function restore(){var e;for(var t=0,n=this.methods.length;t<n;t++)e=this.methods[t],global[e]=this["_"+e]}function stubGlobal(e,t){t["_"+e]=global[e];if(e=="Date"){var n=mirrorDateProperties(t[e],global[e]);global[e]=n}else{global[e]=function(){return t[e].apply(t,arguments)};for(var r in t[e])t[e].hasOwnProperty(r)&&(global[e][r]=t[e][r])}global[e].clock=t}var id=1;sinon.clock={now:0,create:function(t){var n=createObject(this);typeof t=="number"&&(n.now=t);if(!t||typeof t!="object")return n;throw new TypeError("now should be milliseconds since UNIX epoch")},setTimeout:function(t,n){return addTimer.call(this,arguments,!1)},clearTimeout:function(t){this.timeouts||(this.timeouts=[]),t in this.timeouts&&delete this.timeouts[t]},setInterval:function(t,n){return addTimer.call(this,arguments,!0)},clearInterval:function(t){this.clearTimeout(t)},tick:function(t){t=typeof t=="number"?t:parseTime(t);var n=this.now,r=this.now+t,i=this.now,s=this.firstTimerInRange(n,r),o;while(s&&n<=r){if(this.timeouts[s.id]){n=this.now=s.callAt;try{this.callTimer(s)}catch(u){o=o||u}}s=this.firstTimerInRange(i,r),i=n}this.now=r;if(o)throw o},firstTimerInRange:function(e,t){var n,r,i;for(var s in this.timeouts)if(this.timeouts.hasOwnProperty(s)){if(this.timeouts[s].callAt<e||this.timeouts[s].callAt>t)continue;if(!r||this.timeouts[s].callAt<r)i=this.timeouts[s],r=this.timeouts[s].callAt,n={func:this.timeouts[s].func,callAt:this.timeouts[s].callAt,interval:this.timeouts[s].interval,id:this.timeouts[s].id}}return n||null},callTimer:function(timer){try{typeof timer.func=="function"?timer.func.call(null):eval(timer.func)}catch(e){var exception=e}if(!this.timeouts[timer.id]){if(exception)throw exception;return}typeof timer.interval=="number"?this.timeouts[timer.id].callAt+=timer.interval:delete this.timeouts[timer.id];if(exception)throw exception},reset:function(){this.timeouts={}},Date:function(){function t(n,r,i,s,o,u,a){switch(arguments.length){case 0:return new e(t.clock.now);case 1:return new e(n);case 2:return new e(n,r);case 3:return new e(n,r,i);case 4:return new e(n,r,i,s);case 5:return new e(n,r,i,s,o);case 6:return new e(n,r,i,s,o,u);default:return new e(n,r,i,s,o,u,a)}}var e=Date;return mirrorDateProperties(t,e)}()};var methods=["Date","setTimeout","setInterval","clearTimeout","clearInterval"];sinon.useFakeTimers=function(t){var n=sinon.clock.create(t);n.restore=restore,n.methods=Array.prototype.slice.call(arguments,typeof t=="number"?1:0),n.methods.length===0&&(n.methods=methods);for(var r=0,i=n.methods.length;r<i;r++)stubGlobal(n.methods[r],n);return n}})(typeof global!="undefined"&&typeof global!="function"?global:this),sinon.timers={setTimeout:setTimeout,clearTimeout:clearTimeout,setInterval:setInterval,clearInterval:clearInterval,Date:Date},typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),typeof sinon=="undefined"&&(this.sinon={}),function(){var e=[].push;sinon.Event=function(t,n,r){this.initEvent(t,n,r)},sinon.Event.prototype={initEvent:function(e,t,n){this.type=e,this.bubbles=t,this.cancelable=n},stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}},sinon.EventTarget={addEventListener:function(n,r,i){this.eventListeners=this.eventListeners||{},this.eventListeners[n]=this.eventListeners[n]||[],e.call(this.eventListeners[n],r)},removeEventListener:function(t,n,r){var i=this.eventListeners&&this.eventListeners[t]||[];for(var s=0,o=i.length;s<o;++s)if(i[s]==n)return i.splice(s,1)},dispatchEvent:function(t){var n=t.type,r=this.eventListeners&&this.eventListeners[n]||[];for(var i=0;i<r.length;i++)typeof r[i]=="function"?r[i].call(this,t):r[i].handleEvent(t);return!!t.defaultPrevented}}}(),typeof sinon=="undefined"&&(this.sinon={}),sinon.xhr={XMLHttpRequest:this.XMLHttpRequest},function(e){function r(){this.readyState=r.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",typeof r.onCreate=="function"&&r.onCreate(this)}function i(e){if(e.readyState!==r.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function s(e,t){if(!e)return;for(var n=0,r=e.length;n<r;n+=1)t(e[n])}function o(e,t){for(var n=0;n<e.length;n++)if(t(e[n])===!0)return!0;return!1}function f(e){if(e.readyState==r.DONE)throw new Error("Request done")}function l(e){if(e.async&&e.readyState!=r.HEADERS_RECEIVED)throw new Error("No headers received")}function c(e){if(typeof e!="string"){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var t=sinon.xhr;t.GlobalXMLHttpRequest=e.XMLHttpRequest,t.GlobalActiveXObject=e.ActiveXObject,t.supportsActiveX=typeof t.GlobalActiveXObject!="undefined",t.supportsXHR=typeof t.GlobalXMLHttpRequest!="undefined",t.workingXHR=t.supportsXHR?t.GlobalXMLHttpRequest:t.supportsActiveX?function(){return new t.GlobalActiveXObject("MSXML2.XMLHTTP.3.0")}:!1;var n={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0},u=function(e,t,n){switch(n.length){case 0:return e[t]();case 1:return e[t](n[0]);case 2:return e[t](n[0],n[1]);case 3:return e[t](n[0],n[1],n[2]);case 4:return e[t](n[0],n[1],n[2],n[3]);case 5:return e[t](n[0],n[1],n[2],n[3],n[4])}};r.filters=[],r.addFilter=function(e){this.filters.push(e)};var a=/MSIE 6/;r.defake=function(e,t){var n=new sinon.xhr.workingXHR;s(["open","setRequestHeader","send","abort","getResponseHeader","getAllResponseHeaders","addEventListener","overrideMimeType","removeEventListener"],function(t){e[t]=function(){return u(n,t,arguments)}});var i=function(t){s(t,function(t){try{e[t]=n[t]}catch(r){if(!a.test(navigator.userAgent))throw r}})},o=function(){e.readyState=n.readyState,n.readyState>=r.HEADERS_RECEIVED&&i(["status","statusText"]),n.readyState>=r.LOADING&&i(["responseText"]),n.readyState===r.DONE&&i(["responseXML"]),e.onreadystatechange&&e.onreadystatechange.call(e)};if(n.addEventListener){for(var f in e.eventListeners)e.eventListeners.hasOwnProperty(f)&&s(e.eventListeners[f],function(e){n.addEventListener(f,e)});n.addEventListener("readystatechange",o)}else n.onreadystatechange=o;u(n,"open",t)},r.useFilters=!1,sinon.extend(r.prototype,sinon.EventTarget,{async:!0,open:function(t,n,i,s,u){this.method=t,this.url=n,this.async=typeof i=="boolean"?i:!0,this.username=s,this.password=u,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1;if(sinon.FakeXMLHttpRequest.useFilters===!0){var a=arguments,f=o(r.filters,function(e){return e.apply(this,a)});if(f)return sinon.FakeXMLHttpRequest.defake(this,arguments)}this.readyStateChange(r.OPENED)},readyStateChange:function(t){this.readyState=t;if(typeof this.onreadystatechange=="function")try{this.onreadystatechange()}catch(n){sinon.logError("Fake XHR onreadystatechange handler",n)}this.dispatchEvent(new sinon.Event("readystatechange"))},setRequestHeader:function(t,r){i(this);if(n[t]||/^(Sec-|Proxy-)/.test(t))throw new Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+r:this.requestHeaders[t]=r},setResponseHeaders:function(t){this.responseHeaders={};for(var n in t)t.hasOwnProperty(n)&&(this.responseHeaders[n]=t[n]);this.async&&this.readyStateChange(r.HEADERS_RECEIVED)},send:function(t){i(this);if(!/^(get|head)$/i.test(this.method)){if(this.requestHeaders["Content-Type"]){var n=this.requestHeaders["Content-Type"].split(";");this.requestHeaders["Content-Type"]=n[0]+";charset=utf-8"}else this.requestHeaders["Content-Type"]="text/plain;charset=utf-8";this.requestBody=t}this.errorFlag=!1,this.sendFlag=this.async,this.readyStateChange(r.OPENED),typeof this.onSend=="function"&&this.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>sinon.FakeXMLHttpRequest.UNSENT&&this.sendFlag&&(this.readyStateChange(sinon.FakeXMLHttpRequest.DONE),this.sendFlag=!1),this.readyState=sinon.FakeXMLHttpRequest.UNSENT},getResponseHeader:function(t){if(this.readyState<r.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(t))return null;t=t.toLowerCase();for(var n in this.responseHeaders)if(n.toLowerCase()==t)return this.responseHeaders[n];return null},getAllResponseHeaders:function(){if(this.readyState<r.HEADERS_RECEIVED)return"";var t="";for(var n in this.responseHeaders)this.responseHeaders.hasOwnProperty(n)&&!/^Set-Cookie2?$/i.test(n)&&(t+=n+": "+this.responseHeaders[n]+"\r\n");return t},setResponseBody:function(t){f(this),l(this),c(t);var n=this.chunkSize||10,i=0;this.responseText="";do this.async&&this.readyStateChange(r.LOADING),this.responseText+=t.substring(i,i+n),i+=n;while(i<t.length);var s=this.getResponseHeader("Content-Type");if(this.responseText&&(!s||/(text\/xml)|(application\/xml)|(\+xml)/.test(s)))try{this.responseXML=r.parseXML(this.responseText)}catch(o){}this.async?this.readyStateChange(r.DONE):this.readyState=r.DONE},respond:function(t,n,i){this.setResponseHeaders(n||{}),this.status=typeof t=="number"?t:200,this.statusText=r.statusCodes[this.status],this.setResponseBody(i||"")}}),sinon.extend(r,{UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4}),r.parseXML=function(t){var n;if(typeof DOMParser!="undefined"){var r=new DOMParser;n=r.parseFromString(t,"text/xml")}else n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t);return n},r.statusCodes={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},sinon.useFakeXMLHttpRequest=function(){return sinon.FakeXMLHttpRequest.restore=function(r){t.supportsXHR&&(e.XMLHttpRequest=t.GlobalXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=t.GlobalActiveXObject),delete sinon.FakeXMLHttpRequest.restore,r!==!0&&delete sinon.FakeXMLHttpRequest.onCreate},t.supportsXHR&&(e.XMLHttpRequest=sinon.FakeXMLHttpRequest),t.supportsActiveX&&(e.ActiveXObject=function(n){return n=="Microsoft.XMLHTTP"||/^Msxml2\.XMLHTTP/i.test(n)?new sinon.FakeXMLHttpRequest:new t.GlobalActiveXObject(n)}),sinon.FakeXMLHttpRequest},sinon.FakeXMLHttpRequest=r}(this),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon);if(typeof sinon=="undefined")var sinon={};sinon.fakeServer=function(){function t(){}function n(e){return t.prototype=e,new t}function r(e){var t=e;Object.prototype.toString.call(e)!="[object Array]"&&(t=[200,{},e]);if(typeof t[2]!="string")throw new TypeError("Fake server response body should be string, but was "+typeof t[2]);return t}function o(e,t,n){var r=e.method,i=!r||r.toLowerCase()==t.toLowerCase(),s=e.url,o=!s||s==n||typeof s.test=="function"&&s.test(n);return i&&o}function u(e,t){var n=this.getHTTPMethod(t),r=t.url;if(!/^https?:\/\//.test(r)||s.test(r))r=r.replace(s,"");if(o(e,this.getHTTPMethod(t),r)){if(typeof e.response=="function"){var i=e.url,u=[t].concat(i?r.match(i).slice(1):[]);return e.response.apply(e,u)}return!0}return!1}var e=[].push,i=window.location,s=new RegExp("^"+i.protocol+"//"+i.host);return{create:function(){var e=n(this);return this.xhr=sinon.useFakeXMLHttpRequest(),e.requests=[],this.xhr.onCreate=function(t){e.addRequest(t)},e},addRequest:function(n){var r=this;e.call(this.requests,n),n.onSend=function(){r.handleRequest(this)},this.autoRespond&&!this.responding&&(setTimeout(function(){r.responding=!1,r.respond()},this.autoRespondAfter||10),this.responding=!0)},getHTTPMethod:function(t){if(this.fakeHTTPMethods&&/post/i.test(t.method)){var n=(t.requestBody||"").match(/_method=([^\b;]+)/);return n?n[1]:t.method}return t.method},handleRequest:function(n){n.async?(this.queue||(this.queue=[]),e.call(this.queue,n)):this.processRequest(n)},respondWith:function(n,i,s){if(arguments.length==1&&typeof n!="function"){this.response=r(n);return}this.responses||(this.responses=[]),arguments.length==1&&(s=n,i=n=null),arguments.length==2&&(s=i,i=n,n=null),e.call(this.responses,{method:n,url:i,response:typeof s=="function"?s:r(s)})},respond:function(){arguments.length>0&&this.respondWith.apply(this,arguments);var t=this.queue||[],n;while(n=t.shift())this.processRequest(n)},processRequest:function(t){try{if(t.aborted)return;var n=this.response||[404,{},""];if(this.responses)for(var r=0,i=this.responses.length;r<i;r++)if(u.call(this,this.responses[r],t)){n=this.responses[r].response;break}t.readyState!=4&&t.respond(n[0],n[1],n[2])}catch(s){sinon.logError("Fake server request processing",s)}},restore:function(){return this.xhr.restore&&this.xhr.restore.apply(this.xhr,arguments)}}}(),typeof module=="object"&&typeof require=="function"&&(module.exports=sinon),function(){function e(){}e.prototype=sinon.fakeServer,sinon.fakeServerWithClock=new e,sinon.fakeServerWithClock.addRequest=function(t){if(t.async){typeof setTimeout.clock=="object"?this.clock=setTimeout.clock:(this.clock=sinon.useFakeTimers(),this.resetClock=!0);if(!this.longestTimeout){var n=this.clock.setTimeout,r=this.clock.setInterval,i=this;this.clock.setTimeout=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),n.apply(this,arguments)},this.clock.setInterval=function(e,t){return i.longestTimeout=Math.max(t,i.longestTimeout||0),r.apply(this,arguments)}}}return sinon.fakeServer.addRequest.call(this,t)},sinon.fakeServerWithClock.respond=function(){var t=sinon.fakeServer.respond.apply(this,arguments);return this.clock&&(this.clock.tick(this.longestTimeout||0),this.longestTimeout=0,this.resetClock&&(this.clock.restore(),this.resetClock=!1)),t},sinon.fakeServerWithClock.restore=function(){return this.clock&&this.clock.restore(),sinon.fakeServer.restore.apply(this,arguments)}}();if(typeof module=="object"&&typeof require=="function"){var sinon=require("../sinon");sinon.extend(sinon,require("./util/fake_timers"))}return function(){function t(t,n,r,i){if(!i)return;n.injectInto?n.injectInto[r]=i:e.call(t.args,i)}function n(e){var t=sinon.create(sinon.sandbox);return e.useFakeServer&&(typeof e.useFakeServer=="object"&&(t.serverPrototype=e.useFakeServer),t.useFakeServer()),e.useFakeTimers&&(typeof e.useFakeTimers=="object"?t.useFakeTimers.apply(t,e.useFakeTimers):t.useFakeTimers()),t}var e=[].push;sinon.sandbox=sinon.extend(sinon.create(sinon.collection),{useFakeTimers:function(){return this.clock=sinon.useFakeTimers.apply(sinon,arguments),this.add(this.clock)},serverPrototype:sinon.fakeServer,useFakeServer:function(){var t=this.serverPrototype||sinon.fakeServer;return!t||!t.create?null:(this.server=t.create(),this.add(this.server))},inject:function(e){return sinon.collection.inject.call(this,e),this.clock&&(e.clock=this.clock),this.server&&(e.server=this.server,e.requests=this.server.requests),e},create:function(e){if(!e)return sinon.create(sinon.sandbox);var r=n(e);r.args=r.args||[];var i,s,o=r.inject({});if(e.properties)for(var u=0,a=e.properties.length;u<a;u++)i=e.properties[u],s=o[i]||i=="sandbox"&&r,t(r,e,i,s);else t(r,e,"sandbox",s);return r}}),sinon.sandbox.useFakeXMLHttpRequest=sinon.sandbox.useFakeServer,typeof module=="object"&&typeof require=="function"&&(module.exports=sinon.sandbox)}(),function(e){function n(t){var n=typeof t;if(n!="function")throw new TypeError("sinon.test needs to wrap a test function, got "+n);return function(){var n=e.getConfig(e.config);n.injectInto=n.injectIntoThis&&this||n.injectInto;var r=e.sandbox.create(n),i,s,o=Array.prototype.slice.call(arguments).concat(r.args);try{s=t.apply(this,o)}finally{r.verifyAndRestore()}return s}}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e)return;n.config={injectIntoThis:!0,injectInto:null,properties:["spy","stub","mock","clock","server","requests"],useFakeTimers:!0,useFakeServer:!0},t?module.exports=n:e.test=n}(typeof sinon=="object"&&sinon||null),function(e){function n(e,t,n){return function(){t&&t.apply(this,arguments);var r,i;try{i=e.apply(this,arguments)}catch(s){r=s}n&&n.apply(this,arguments);if(r)throw r;return i}}function r(t,r){if(!t||typeof t!="object")throw new TypeError("sinon.testCase needs an object with test functions");r=r||"test";var i=new RegExp("^"+r),s={},o,u,a,f=t.setUp,l=t.tearDown;for(o in t)if(t.hasOwnProperty(o)){u=t[o];if(/^(setUp|tearDown)$/.test(o))continue;if(typeof u=="function"&&i.test(o)){a=u;if(f||l)a=n(u,f,l);s[o]=e.test(a)}else s[o]=t[o]}return s}var t=typeof module=="object"&&typeof require=="function";!e&&t&&(e=require("../sinon"));if(!e||!Object.prototype.hasOwnProperty)return;t?module.exports=r:e.testCase=r}(typeof sinon=="object"&&sinon||null),function(e,t){function s(){var e;for(var t=0,n=arguments.length;t<n;++t)e=arguments[t],e||i.fail("fake is not a spy"),typeof e!="function"&&i.fail(e+" is not a function"),typeof e.getCall!="function"&&i.fail(e+" is not stubbed")}function o(e,n){e=e||t;var r=e.fail||i.fail;r.call(e,n)}function u(e,t,n){arguments.length==2&&(n=t,t=e),i[e]=function(u){s(u);var a=r.call(arguments,1),f=!1;typeof t=="function"?f=!t(u):f=typeof u[t]=="function"?!u[t].apply(u,a):!u[t],f?o(this,u.printf.apply(u,[n].concat(a))):i.pass(e)}}function a(e,t){return!e||/^fail/.test(t)?t:e+t.slice(0,1).toUpperCase()+t.slice(1)}var n=typeof module=="object"&&typeof require=="function",r=Array.prototype.slice,i;!e&&n&&(e=require("../sinon"));if(!e)return;i={failException:"AssertError",fail:function(t){var n=new Error(t);throw n.name=this.failException||i.failException,n},pass:function(t){},callOrder:function(){s.apply(null,arguments);var n="",u="";if(!e.calledInOrder(arguments)){try{n=[].join.call(arguments,", "),u=e.orderByFirstCall(r.call(arguments)).join(", ")}catch(a){}o(this,"expected "+n+" to be "+"called in order but were called as "+u)}else i.pass("callOrder")},callCount:function(n,r){s(n);if(n.callCount!=r){var u="expected %n to be called "+e.timesInWords(r)+" but was called %c%C";o(this,n.printf(u))}else i.pass("callCount")},expose:function(t,n){if(!t)throw new TypeError("target is null or undefined");var r=n||{},i=typeof r.prefix=="undefined"&&"assert"||r.prefix,s=typeof r.includeFail=="undefined"||!!r.includeFail;for(var o in this)o!="export"&&(s||!/^(fail)/.test(o))&&(t[a(i,o)]=this[o]);return t}},u("called","expected %n to have been called at least once but was never called"),u("notCalled",function(e){return!e.called},"expected %n to not have been called but was called %c%C"),u("calledOnce","expected %n to be called once but was called %c%C"),u("calledTwice","expected %n to be called twice but was called %c%C"),u("calledThrice","expected %n to be called thrice but was called %c%C"),u("calledOn","expected %n to be called with %1 as this but was called with %t"),u("alwaysCalledOn","expected %n to always be called with %1 as this but was called with %t"),u("calledWith","expected %n to be called with arguments %*%C"),u("alwaysCalledWith","expected %n to always be called with arguments %*%C"),u("calledWithExactly","expected %n to be called with exact arguments %*%C"),u("alwaysCalledWithExactly","expected %n to always be called with exact arguments %*%C"),u("neverCalledWith","expected %n to never be called with arguments %*%C"),u("threw","%n did not throw exception%C"),u("alwaysThrew","%n did not always throw exception%C"),n?module.exports=i:e.assert=i}(typeof sinon=="object"&&sinon||null,typeof window!="undefined"?window:global),sinon}.call(typeof window!="undefined"&&window||{});(function(e){"use strict";typeof require=="function"&&typeof exports=="object"&&typeof module=="object"?module.exports=e:typeof define=="function"&&define.amd?define(function(){return e}):chai.use(e)})(function(t,n){"use strict";function i(e){return typeof e=="function"&&typeof e.getCall=="function"&&typeof e.calledWithExactly=="function"}function s(e){return e&&i(e.proxy)}function o(e){if(!i(e._obj)&&!s(e._obj))throw new TypeError(n.inspect(e._obj)+" is not a spy or a call to a spy!")}function u(e,t,n,r,i){function o(t){return e.printf.apply(e,t)}var s=r?"always have ":"have ";return n=n||"",e=e.proxy||e,{affirmative:o(["expected %n to "+s+t+n].concat(i)),negative:o(["expected %n to not "+s+t].concat(i))}}function a(e,r,i){n.addProperty(t.Assertion.prototype,e,function(){o(this);var t=u(this._obj,r,i,!1);this.assert(this._obj[e],t.affirmative,t.negative)})}function f(e,i,s,a){n.addMethod(t.Assertion.prototype,e,function(){o(this);var e="always"+i[0].toUpperCase()+i.substring(1),t=n.flag(this,"always")&&typeof this._obj[e]=="function",f=t?e:i,l=u(this._obj,s,a,t,r.call(arguments));this.assert(this._obj[f].apply(this._obj,arguments),l.affirmative,l.negative)})}function l(e,t,n){f(e,e,t,n)}var r=Array.prototype.slice;n.addProperty(t.Assertion.prototype,"always",function(){n.flag(this,"always",!0)}),a("called","been called"," at least once, but it was never called"),a("calledOnce","been called exactly once",", but it was called %c%C"),a("calledTwice","been called exactly twice",", but it was called %c%C"),a("calledThrice","been called exactly thrice",", but it was called %c%C"),l("calledBefore","been called before %1"),l("calledAfter","been called after %1"),l("calledOn","been called with %1 as this",", but it was called with %t instead"),l("calledWith","been called with arguments %*","%C"),l("calledWithExactly","been called with exact arguments %*","%C"),l("returned","returned %1"),f("thrown","threw","thrown %1")})